var r1=require("node:module");var w1=Object.create;var{getPrototypeOf:u1,defineProperty:b0,getOwnPropertyNames:D1,getOwnPropertyDescriptor:q1}=Object,G1=Object.prototype.hasOwnProperty;var a0=(z,C,u)=>{u=z!=null?w1(u1(z)):{};let o=C||!z||!z.__esModule?b0(u,"default",{value:z,enumerable:!0}):u;for(let l of D1(z))if(!G1.call(o,l))b0(o,l,{get:()=>z[l],enumerable:!0});return o},R1=new WeakMap,p1=(z)=>{var C=R1.get(z),u;if(C)return C;if(C=b0({},"__esModule",{value:!0}),z&&typeof z==="object"||typeof z==="function")D1(z).map((o)=>!G1.call(C,o)&&b0(C,o,{get:()=>z[o],enumerable:!(u=q1(z,o))||u.enumerable}));return R1.set(z,C),C};var n1=(z,C)=>{for(var u in C)b0(z,u,{get:C[u],enumerable:!0,configurable:!0,set:(o)=>C[u]=()=>o})};var m1={};n1(m1,{default:()=>A1});module.exports=p1(m1);var L1=a0(require("ws")),M1=a0(require("xhr2")),B1=a0(require("json5")),R0=a0(require("pako")),K1=require("https-proxy-agent"),i1=require("@peculiar/webcrypto"),n=require("perf_hooks"),I1=a0(require("node-datachannel/polyfill")),z1=new i1.Crypto,{RTCPeerConnection:y1,RTCIceCandidate:H1,RTCSessionDescription:E1}=I1.default,F1=null,v1,x1=!1,h1=new Promise((z)=>{F1=z});function A1(z){if(z?.webrtc)y1=z.webrtc.RTCPeerConnection,H1=z.webrtc.RTCIceCandidate,E1=z.webrtc.RTCSessionDescription;if(z?.debug!==void 0)x1=z.debug;if(z?.proxy)v1=new K1.HttpsProxyAgent(new URL(z.proxy));return h1}var l1=(z)=>{return z};(function(z){function C(){return O.Zb(this,"")}function u(_,$){if($==null)return null;$.xd==null&&($.xd=z.ye++);var j;return _.oe==null?_.oe={}:j=_.oe[$.xd],j==null&&(j=$.bind(_),_.oe[$.xd]=j),j}class o{constructor(){this.rc=H.na,this.K=new F(0,0),this.F=new F(0,0)}G(_){var $=this.F;_.g($.x),_.g($.y),$=this.K,_.g($.x),_.g($.y),_.f(this.rc.S)}qa(_){var $=this.F;$.x=_.o(),$.y=_.o(),$=this.K,$.x=_.o(),$.y=_.o(),_=_.Vd(),this.rc=_==1?H.fa:_==2?H.ta:H.na}}class l{constructor(){this.T=0,this.qc=1/0,this.Ka=this.Va=100,this.Ic=this.Jc=0}G(_){_.f(this.Ic),_.f(this.Jc),_.g(this.Ka),_.g(this.Va),_.g(this.qc),_.w(this.T)}qa(_){this.Ic=_.C(),this.Jc=_.C(),this.Ka=_.o(),this.Va=_.o(),this.qc=_.o(),this.T=_.H()}Ba(_){var $=_[this.Ic];if(_=_[this.Jc],$!=null&&_!=null){var j=$.a,N=_.a,W=j.x-N.x;j=j.y-N.y;var X=Math.sqrt(W*W+j*j);if(!(0>=X)){if(W/=X,j/=X,N=$.L/($.L+_.L),N!=N&&(N=0.5),this.Ka>=this.Va)var Y=this.Ka,J=0;else if(X<=this.Ka)Y=this.Ka,J=1;else if(X>=this.Va)Y=this.Va,J=-1;else return;if(X=Y-X,0*this.qc==0)N=this.qc*X*0.5,W*=N,j*=N,J=N=$.u,$=$.L,N.x=J.x+W*$,N.y=J.y+j*$,N=$=_.u,_=_.L,$.x=N.x+-W*_,$.y=N.y+-j*_;else{Y=X*N;var{a:U,a:S}=$;U.x=S.x+W*Y*0.5,U.y=S.y+j*Y*0.5,S=U=_.a,X-=Y,U.x=S.x-W*X*0.5,U.y=S.y-j*X*0.5,X=$.u,Y=_.u,X=W*(X.x-Y.x)+j*(X.y-Y.y),0>=X*J&&(N*=X,$=J=$.u,J.x=$.x-W*N,J.y=$.y-j*N,_=$=_.u,N=X-N,$.x=_.x+W*N,$.y=_.y+j*N)}}}}}class J0{constructor(_,$,j){this.hb=this.ee=null,this.Rb=[],this.Pe=0,this.pf=!1,this.Ld=[],this.jb=[],this.oa=new y1({iceServers:$},J0.Fg);let N;this.Ye=new Promise(function(X){N=X});let W=this;this.oa.onicecandidate=function(X){X.candidate==null?N(W.Ld):(X=X.candidate,X.candidate!=null&&X.candidate!=""&&(W.Td!=null&&W.Td(X),W.Ld.push(X)))};for($=0;$<j.length;)this.Hg(j[$++]);this.S=_}gi(){var _;_==null&&(_=1e4),clearTimeout(this.ee),this.ee=setTimeout(u(this,this.dh),_)}async Gg(_,$){await this.oa.setRemoteDescription(_),_=await this.oa.createAnswer(),await this.oa.setLocalDescription(_);let j=0;for(;j<$.length;)this.Ie($[j++]);try{await V1.li(this.Ye)}catch(N){}return _}Hg(_){let $={id:this.jb.length,negotiated:!0,ordered:_.ordered};_.reliable||($.maxRetransmits=0),_=this.oa.createDataChannel(_.name,$),_.binaryType="arraybuffer";let j=this;_.onopen=function(){let N=0,W=j.jb;for(;N<W.length;)if(W[N++].readyState!="open")return;j.Rd!=null&&j.Rd()},_.onclose=function(){j.Id()},_.onmessage=function(){j.Id()},this.jb.push(_)}Ie(_){let $=this;setTimeout(function(){$.oa.iceConnectionState!="closed"&&$.oa.addIceCandidate(_).catch(function(){})},this.Pe)}dh(){this.Id()}Id(){this.Sd!=null&&this.Sd(),this.cb()}cb(){this.Me(),this.oa.close()}Me(){clearTimeout(this.ee),this.Rd=this.Td=this.Sd=null,this.oa.onicecandidate=null,this.oa.ondatachannel=null,this.oa.onsignalingstatechange=null,this.oa.oniceconnectionstatechange=null;let _=0,$=this.jb;for(;_<$.length;){let j=$[_];++_,j.onopen=null,j.onclose=null,j.onmessage=null}}}class g{static zf(_,$,j,N){return new Promise(function(W,X){let Y=new M1.default;Y.open($,_),Y.responseType="json",Y.onload=function(){200<=Y.status&&300>Y.status?Y.response!=null?W(Y.response):X(null):X("status: "+Y.status)},Y.onerror=function(J){X(J)},N!=null&&Y.setRequestHeader("Content-type",N),Y.send(j)})}static Pg(_){return g.zf(_,"GET",null)}static Rg(_){return g.Pg(_).then(function($){let j=$.error;if(j!=null)throw T.s(j);return $.data})}static Hh(_,$,j){return g.zf(_,"POST",$,j)}static Ih(_,$,j){return g.Hh(_,$,j).then(function(N){let W=N.error;if(W!=null)throw T.s(W);return N.data})}}class o0{constructor(){this.Nc=0,this.M=15,this.m=0,this.la=new F(0,0),this.L=this.i=0.5,this.ga=0.96,this.zc=0.1,this.Oc=0.07,this.Pc=0.96,this.Mc=5}G(_){_.g(this.i),_.g(this.L),_.g(this.ga),_.g(this.zc),_.g(this.Oc),_.g(this.Pc),_.g(this.Mc);let $=this.la;_.g($.x),_.g($.y),_.w(this.m),_.g(this.M),_.g(this.Nc)}qa(_){this.i=_.o(),this.L=_.o(),this.ga=_.o(),this.zc=_.o(),this.Oc=_.o(),this.Pc=_.o(),this.Mc=_.o();let $=this.la;$.x=_.o(),$.y=_.o(),this.m=_.H(),this.M=_.o(),this.Nc=_.o()}}class _1{constructor(_,$){this.x=_,this.y=$}}class r{constructor(){this.zb=this.vb=this.Lb=this.Xa=0,this.Nd=H.fa,this.Ab=this.$a=0,this.ia=new t0,this.Na=0,this.ab=5,this.ea=null}eh(_){this.ha=_,this.ab=_.ab,this.Na=_.Na,this.ea=_.ea,this.ia.v=this.ea.v,this.ia.Y=this.ea.Y,this.ia.I=this.ea.I,this.ia.Ta=this.ea.Ta,_=0;let $=this.ea.A;for(;_<$.length;)this.ia.A.push($[_++].th());this.af()}$e(_){if(_.ja==H.na)_.N=null;else{_.Jb=0;var $=_.N;$==null&&($=new M0,_.N=$,this.ia.A.push($));var j=this.ea.Mb;$.T=0,$.M=j.M,$.L=j.L,$.ga=j.ga,$.i=j.i,$.c=39,$.m=_.ja.m|j.m;var N=_.ja==H.fa?this.ea.Pb:this.ea.Ib;N.length==0?($.a.x=_.ja.Qe*this.ea.cc,$.a.y=0):(_=$.a,N=N[N.length-1],_.x=N.x,_.y=N.y),N=$.u,N.x=0,N.y=0,$=$.la,j=j.la,$.x=j.x,$.y=j.y}}Ba(_){if(0<this.Xa)120>this.Xa&&this.Xa--;else{var $=this.ha.Og;$!=null&&$(),$=this.ha.ba;for(var j=0;j<$.length;){var N=$[j];if(++j,N.N!=null){(N.Jb&16)==0&&(N.Cb=!1);var W=this.ea.Mb;if(0<N.uc&&N.uc--,N.Wb<this.ha.Pd&&N.Wb++,N.Cb&&0>=N.uc&&0<=N.Wb){for(var X=!1,Y=0,J=this.ia.A;Y<J.length;){var U=J[Y];if(++Y,(U.m&64)!=0&&U!=N.N){var S=U.a,P=N.N.a,D=S.x-P.x;if(S=S.y-P.y,P=Math.sqrt(D*D+S*S),4>P-U.M-N.N.M){X=D/P,D=S/P,S=W.Mc;var K=P=U.u;U=U.L,P.x=K.x+X*S*U,P.y=K.y+D*S*U,K=N.N,U=-W.Nc,P=S=K.u,K=K.L,S.x=P.x+X*U*K,S.y=P.y+D*U*K,X=!0}}}X&&(this.ha.vf!=null&&this.ha.vf(N),N.Cb=!1,N.uc=this.ha.Xc,N.Wb-=this.ha.fc)}X=N.Jb,J=Y=0,(X&1)!=0&&--J,(X&2)!=0&&++J,(X&4)!=0&&--Y,(X&8)!=0&&++Y,Y!=0&&J!=0&&(X=Math.sqrt(Y*Y+J*J),Y/=X,J/=X),X=N.N.u,U=N.Cb?W.Oc:W.zc,X.x+=Y*U,X.y+=J*U,N.N.ga=N.Cb?W.Pc:W.ga}}j=0,N=this.ia.A,W=0;for(Y=N.length;W<Y;)X=W++,J=N[X],(J.m&128)!=0&&(r.Re[j]=X,X=r.jf[j],J=J.a,X.x=J.x,X.y=J.y,++j);if(this.ia.Ba(_),this.$a==0){for(_=0;_<$.length;)j=$[_],++_,j.N!=null&&(j.N.c=39|this.Nd.ih);$=this.ia.A[0].u,0<$.x*$.x+$.y*$.y&&(this.$a=1)}else if(this.$a==1){this.Lb+=0.016666666666666666;for(_=0;_<$.length;)N=$[_],++_,N.N!=null&&(N.N.c=39);N=H.na,$=this.ia.A;for(_=0;_<j&&(N=_++,N=this.ea.Ag($[r.Re[N]].a,r.jf[N]),N==H.na););N!=H.na?(this.$a=2,this.Ab=150,this.Nd=N,N==H.fa?this.vb++:this.zb++,this.ha.Lf!=null&&this.ha.Lf(N.Zc),this.ha.yf!=null&&this.ha.yf(N.S)):0<this.Na&&this.Lb>=60*this.Na&&this.zb!=this.vb&&(this.ha.ji!=null&&this.ha.ji(),this.If())}else if(this.$a==2)this.Ab--,0>=this.Ab&&(0<this.ab&&(this.zb>=this.ab||this.vb>=this.ab)||0<this.Na&&this.Lb>=60*this.Na&&this.zb!=this.vb?this.If():(this.af(),this.ha.wf!=null&&this.ha.wf()));else if(this.$a==3&&(this.Ab--,0>=this.Ab&&($=this.ha,$.D!=null))){$.D=null,_=0;for(j=$.ba;_<j.length;)N=j[_],++_,N.N=null,N.Eb=0;$.ld!=null&&$.ld(null)}}}If(){this.Ab=300,this.$a=3,this.ha.Mf!=null&&this.ha.Mf(this.zb>this.vb?H.fa:H.ta)}af(){let _=this.ha.ba;this.$a=0;for(var $=this.ea.A,j=this.ia.A,N=0,W=this.ea.dd?$.length:1;N<W;){var X=N++;$[X].Ze(j[X])}$=[0,0,0];for(j=0;j<_.length;)if(N=_[j],++j,this.$e(N),W=N.ja,W!=H.na){X=N.N.a;var Y=this.ea,J=$[W.S],U=W==H.fa?Y.Pb:Y.Ib;U.length==0?(U=J+1>>1,(J&1)==0&&(U=-U),Y=Y.Ma*W.Qe,J=55*U):(J>=U.length&&(J=U.length-1),J=U[J],Y=J.x,J=J.y),X.x=Y,X.y=J,$[W.S]++,N.Eb=$[W.S]}}G(_){this.ia.G(_),_.w(this.Ab),_.w(this.$a),_.w(this.zb),_.w(this.vb),_.g(this.Lb),_.w(this.Xa),_.f(this.Nd.S)}}class O{static Yf(_){if(_==null)return null;if(_ instanceof Array)return Array;{let $=_.h;if($!=null)return $;return _=O.Ee(_),_!=null?O.og(_):null}}static Zb(_,$){if(_==null)return"null";if(5<=$.length)return"<...>";var j=typeof _;switch(j=="function"&&(_.b||_.Ce)&&(j="object"),j){case"function":return"<function>";case"object":if(_.Yb){var N=X1[_.Yb].Be[_.Kd];if(j=N.Xe,N.Ge){$+="\t";var W=[],X=0;for(N=N.Ge;X<N.length;){let Y=N[X];X+=1,W.push(O.Zb(_[Y],$))}return _=W,j+"("+_.join(",")+")"}return j}if(_ instanceof Array){j="[",$+="\t",W=0;for(X=_.length;W<X;)N=W++,j+=(0<N?",":"")+O.Zb(_[N],$);return j+="]"}try{W=_.toString}catch(Y){return"???"}if(W!=null&&W!=Object.toString&&typeof W=="function"&&(j=_.toString(),j!="[object Object]"))return j;j=`{
`,$+="\t",W=_.hasOwnProperty!=null,X=null;for(X in _)W&&!_.hasOwnProperty(X)||X=="prototype"||X=="__class__"||X=="__super__"||X=="__interfaces__"||X=="__properties__"||(j.length!=2&&(j+=`, 
`),j+=$+X+" : "+O.Zb(_[X],$));return $=$.substring(1),j+=`
`+$+"}";case"string":return _;default:return String(_)}}static De(_,$){for(;;){if(_==null)return!1;if(_==$)return!0;let j=_.gb;if(j!=null&&(_.J==null||_.J.gb!=j)){let N=0,W=j.length;for(;N<W;){let X=j[N++];if(X==$||O.De(X,$))return!0}}_=_.J}}static mg(_,$){if($==null)return!1;switch($){case Array:return _ instanceof Array;case Z1:return typeof _=="boolean";case o1:return _!=null;case L:return typeof _=="number";case h0:return typeof _=="number"?(_|0)===_:!1;case String:return typeof _=="string";default:if(_!=null){if(typeof $=="function"){if(O.lg(_,$))return!0}else if(typeof $=="object"&&O.ng($)&&_ instanceof $)return!0}else return!1;return $==C1&&_.b!=null||$==t1&&_.Ce!=null?!0:_.Yb!=null?X1[_.Yb]==$:!1}}static lg(_,$){return _ instanceof $?!0:$.yd?O.De(O.Yf(_),$):!1}static l(_,$){if(_==null||O.mg(_,$))return _;throw T.s("Cannot cast "+p0.xe(_)+" to "+p0.xe($))}static Ee(_){return _=O.pg.call(_).slice(8,-1),_=="Object"||_=="Function"||_=="Math"||_=="JSON"?null:_}static ng(_){return O.Ee(_)!=null}static og(_){return z[_]}}class m0{constructor(){this.list=[]}Di(_){let $=0,j=_.eb,N=_.fb,W=0,X=this.list;for(;W<X.length;){var Y=X[W];++W;let J=Y.eb;if(J>j)break;if(J==j){if(Y=Y.fb,Y>N)break;Y==N&&++N}++$}_.fb=N,this.list.splice($,0,_)}}class k0{static sa(_,$,j,N,W){_!=null&&_($,j,N,W)}}class d{constructor(){this.c=this.m=63,this.T=16777215,this.ga=0.99,this.L=1,this.i=0.5,this.M=10,this.la=new F(0,0),this.u=new F(0,0),this.a=new F(0,0)}G(_){var $=this.a;_.g($.x),_.g($.y),$=this.u,_.g($.x),_.g($.y),$=this.la,_.g($.x),_.g($.y),_.g(this.M),_.g(this.i),_.g(this.L),_.g(this.ga),_.xa(this.T),_.w(this.c),_.w(this.m)}qa(_){var $=this.a;$.x=_.o(),$.y=_.o(),$=this.u,$.x=_.o(),$.y=_.o(),$=this.la,$.x=_.o(),$.y=_.o(),this.M=_.o(),this.i=_.o(),this.L=_.o(),this.ga=_.o(),this.T=_.Ob(),this.c=_.H(),this.m=_.H()}th(){let _=new M0;return this.Ze(_),_}Ze(_){var $=_.a,j=this.a;$.x=j.x,$.y=j.y,$=_.u,j=this.u,$.x=j.x,$.y=j.y,$=_.la,j=this.la,$.x=j.x,$.y=j.y,_.M=this.M,_.i=this.i,_.L=this.L,_.ga=this.ga,_.T=this.T,_.c=this.c,_.m=this.m}}class V1{static li(_){return new Promise(function($,j){let N=setTimeout(function(){j("Timed out")},500);_.then(function(W){clearTimeout(N),$(W)},function(W){clearTimeout(N),j(W)})})}}class F{constructor(_,$){this.x=_,this.y=$}}class C0{}class $1{constructor(_){this.current=0,this.xi=_}next(){return this.xi[this.current++]}}class m{static qb(_,$){return _.length<=$?_:h.substr(_,0,$)}static yi(_){let $="",j=0,N=_.byteLength;for(;j<N;)$+=Q1.Bi(_[j++]);return $}}class j1{}class c{constructor(){this.ib="",this.Rc=this.Tc=0}static Te(_){let $=new c;return $.Rc=_.lat,$.Tc=_.lon,$.ib=_.code.toLowerCase(),$}static Sg(){return g.Rg(z0.Ke+"api/geo").then(function(_){return c.Te(_)})}}class H{constructor(_,$,j,N,W,X,Y,J){this.Zc=null,this.S=_,this.T=$,this.Qe=j,this.ih=N,this.pa=W,this.m=J,this.hi=new b,this.hi.Qa.push($)}}class g0{constructor(_){this.hb=null,this.Qh=1e4,this.Lc=!0,_.Me(),this.oa=_.oa,this.jb=_.jb,this.Rb=_.Rb,this.hb=_.hb,this.Nf=n.performance.now();let $=null,j=this;$=function(){var W=j.Qh-j.ki();0>=W?j.cb():(clearTimeout(j.Of),W=setTimeout($,W+1000),j.Of=W)},$(),this.oa.oniceconnectionstatechange=function(){let W=j.oa.iceConnectionState;W!="closed"&&W!="failed"||j.cb()},_=0;let N=this.jb;for(;_<N.length;){let W=N[_];++_,W.onmessage=function(X){j.Lc&&(j.Nf=n.performance.now(),j.nf!=null&&j.nf(X.data))},W.onclose=function(){j.cb()}}}ki(){return n.performance.now()-this.Nf}ob(_,$){if(this.Lc&&(_=this.jb[_],_.readyState=="open")){$=$.fe();try{_.send($)}catch(j){$=T.Vb(j).Hb(),z.console.log($)}}}cb(){clearTimeout(this.Of),this.Lc&&(this.Lc=!1,this.oa.close(),this.mf!=null&&this.mf())}}class Q1{static Bi(_){let $="";do $="0123456789ABCDEF".charAt(_&15)+$,_>>>=4;while(0<_);for(;2>$.length;)$="0"+$;return $}}class B{constructor(){this.Kc=0,this.m=32,this.c=63,this.i=1,this.a=new F(0,0)}G(_){let $=this.a;_.g($.x),_.g($.y),_.g(this.i),_.w(this.c),_.w(this.m)}qa(_){let $=this.a;$.x=_.o(),$.y=_.o(),this.i=_.o(),this.c=_.H(),this.m=_.H()}}class b{constructor(){this.de=16777215,this.Qa=[]}G(_){_.f(this.Je),_.w(this.de),_.f(this.Qa.length);let $=0,j=this.Qa;for(;$<j.length;)_.w(j[$++])}qa(_){this.Je=_.C(),this.de=_.H();let $=_.C();if(3<$)throw T.s("too many");this.Qa=[];let j=0;for(;j<$;)++j,this.Qa.push(_.H())}}class D0{static jh(){if(D0.Ud!=null)return D0.Ud;return D0.Ud=new Promise(function(_,$){var j=grecaptcha;j!=null?_(j):(j=createElement("script"),j.src="https://www.google.com/recaptcha/api.js?onload=___recaptchaload&render=explicit",head.appendChild(j),___recaptchaload=function(){_(grecaptcha)},j.onerror=function(){$(null)})}),D0.Ud}}class G0{constructor(_,$,j,N){this.Ac=new Set,this.$b=new Set,this.ed=this.lc=this.Ef=!1,this.Za=null,this.mc=this.S="",this.Th=50000,this.Sh=1e4,this.xb=new Map,this.di=_,this.Md=$,this.zg=j,this.mc=N,this.mc==null&&(this.mc=""),this.ce()}be(_){if(this.Za!=null||_!=null){if(this.Za!=null&&_!=null&&this.Za.byteLength==_.byteLength){let j=new Uint8Array(this.Za),N=new Uint8Array(_),W=!1,X=0,Y=this.Za.byteLength;for(;X<Y;){let J=X++;if(j[J]!=N[J]){W=!0;break}}if(!W)return}this.Za=_.slice(0),this.ed=!0;var $=this;this.ua!=null&&this.ua.readyState==1&&this.fd==null&&(this.Zd(),this.fd=setTimeout(function(){$.fd=null,$.ua.readyState==1&&$.ed&&$.Zd()},1e4))}}ae(_){function $(){j.ua!=null&&j.ua.readyState==1&&j.lc!=j.Ef&&j.Cf(),j.Af=null}this.lc=_;let j=this;this.Af==null&&($(),this.Af=setTimeout($,1000))}ce(_){function $(W){if(W=W.sitekey,W==null)throw T.s(null);N.ic!=null&&N.ic(W,function(X){N.ce(X)})}function j(W){let X=W.url;if(X==null)throw T.s(null);if(W=W.token,W==null)throw T.s(null);N.ua=new L1.default(X+"?token="+W,{headers:{origin:"https://html5.haxball.com"},agent:v1}),N.ua.binaryType="arraybuffer",N.ua.onopen=function(){N.bh()},N.ua.onclose=function(Y){N.Hd(Y.code!=4001)},N.ua.onerror=function(Y){N.Hd(!0),x1&&console.error(Y)},N.ua.onmessage=u(N,N.ah)}_==null&&(_="");let N=this;g.Ih(this.di,"token="+this.mc+"&rcr="+_,g.hg).then(function(W){switch(W.action){case"connect":j(W);break;case"recaptcha":console.log(Error("Invalid Token Provided!"))}}).catch(function(){N.Hd(!0)})}bh(){this.Za!=null&&this.Zd(),this.lc!=0&&this.Cf();let _=this;this.Dh=setInterval(function(){_.Yh()},40000)}ah(_){switch(_=new t(new DataView(_.data),!1),_.C()){case 1:this.Zg(_);break;case 4:this.Ug(_);break;case 5:this.Wg(_);break;case 6:this.Yg(_)}}Zg(_){let $=_.Ob(),j=m.yi(_.La(_.C())),N,W,X;try{_=new t(new DataView(R0.default.inflateRaw(_.La()).buffer),!1),N=_.C()!=0,W=_.mb();let Y=_.xf(),J=[],U=0;for(;U<Y.length;)J.push(new H1(Y[U++]));X=J}catch(Y){this.oc($,0);return}this.$g($,j,W,X,_,N)}$g(_,$,j,N,W,X){if(16<=this.xb.size)this.oc(_,4104);else if(this.Ac.has($))this.oc(_,4102);else{for(var Y=[],J=0;J<N.length;){let D=G0.Ve(N[J++]);if(D!=null){if(this.$b.has(D)){this.oc(_,4102);return}Y.push(D)}}if(this.Ne!=null&&(J=new t(W.j),J.a=W.a,W=this.Ne($,J),W.Kd==1)){this.oc(_,W.reason);return}var U=new J0(_,this.Md,this.zg);X&&(U.Pe=2500),U.Rb=Y,U.hb=$,this.xb.set(_,U);var S=this,P=function(){S.pc(0,U,null),S.xb.delete(U.S)};U.Sd=P,U.Rd=function(){S.xb.delete(U.S),S.pc(0,U,null),S.lf!=null&&S.lf(new g0(U))},U.gi(),async function(){try{let D=await U.Gg(new E1({sdp:j,type:"offer"}),N);S.Zh(U,D,U.Ld),U.Ye.then(function(){S.pc(0,U,null)}),U.Td=function(K){S.Xh(U,K)}}catch(D){P()}}()}}Ug(_){let $=_.Ob(),j;try{_=new t(new DataView(R0.default.inflateRaw(_.La()).buffer),!1),j=new H1(_.xf())}catch(N){return}this.Vg($,j)}Vg(_,$){if(_=this.xb.get(_),_!=null){let j=G0.Ve($);if(j!=null&&(_.Rb.push(j),this.$b.has(j)))return;_.Ie($)}}Wg(_){this.S=_.ad(_.C()),this.Yc!=null&&this.Yc(this.S)}Yg(_){this.mc=_.ad(_.j.byteLength-_.a)}pc(_,$,j){if(!$.pf){_==0&&($.pf=!0);var N=$.S;$=M.aa(32,!1),$.f(_),$.xa(N),j!=null&&(_=R0.default.deflateRaw(j.Bb()),$.pb(_)),this.ua.send($.Sb())}}oc(_,$){let j=M.aa(16,!1);j.f(0),j.xa(_),j.Oa($),this.ua.send(j.Sb())}Yh(){let _=M.aa(1,!1);_.f(8),this.ua.send(_.Sb())}Zd(){this.ed=!1;let _=M.aa(256,!1);_.f(7),this.Za!=null&&_.Sf(this.Za),this.ua.send(_.Sb())}Cf(){let _=M.aa(2,!1);_.f(9),_.f(this.lc?1:0),this.ua.send(_.Sb()),this.Ef=this.lc}Zh(_,$,j){let N=M.aa(32,!1);N.Tb($.sdp),N.Tf(j),this.pc(1,_,N)}Xh(_,$){let j=M.aa(32,!1);j.Tf($),this.pc(4,_,j)}Lg(){let _=this.xb.values(),$=_.next();for(;!$.done;){let j=$.value;$=_.next(),j.cb()}this.xb.clear()}Hd(_){this.Lg(),clearTimeout(this.fd),this.fd=null,this.ed=!1,clearInterval(this.Dh),clearTimeout(this.Uh);let $=this;_&&(this.Uh=setTimeout(function(){$.ce()},this.Sh+Math.random()*this.Th|0))}vg(_){let $=0,j=_.Rb;for(;$<j.length;)this.$b.add(j[$++]);return _.hb!=null&&this.Ac.add(_.hb),{Fi:_.Rb,wi:_.hb}}Ed(){this.$b.clear(),this.Ac.clear()}Dd(_){let $=0,j=_.Fi;for(;$<j.length;)this.$b.delete(j[$++]);this.Ac.delete(_.wi)}static Ve(_){try{let $=S1.Bh(_.candidate);if($.ni=="srflx")return $.fh}catch($){}return null}}class z0{}class N1{static sa(_,$,j,N){_!=null&&_($,j,N)}}class L0{constructor(){}}class S1{static Bh(_){_=_.split(" ");let $=_[4];if(_[6]!="typ")throw T.s(null);return{ni:_[7],fh:$}}}class W1{}class t0{constructor(){this.A=[]}G(_){_.f(this.A.length);let $=0,j=this.A.length;for(;$<j;){let N=$++,W=this.A[N];W.rf=N,W.G(_)}}Ba(_){for(var $=0,j=this.A;$<j.length;){var N=j[$];++$;var{a:W,a:X,u:Y}=N;W.x=X.x+Y.x*_,W.y=X.y+Y.y*_,X=W=N.u,Y=N.la,N=N.ga,W.x=(X.x+Y.x)*N,W.y=(X.y+Y.y)*N}_=0;for($=this.A.length;_<$;){N=_++,j=this.A[N],N+=1;for(W=this.A.length;N<W;)X=this.A[N++],(X.c&j.m)!=0&&(X.m&j.c)!=0&&j.Cg(X);if(j.L!=0){N=0;for(W=this.Y;N<W.length;)if(X=W[N],++N,(X.c&j.m)!=0&&(X.m&j.c)!=0){Y=X.X;var J=j.a;if(Y=X.ka-(Y.x*J.x+Y.y*J.y)+j.M,0<Y){var U=J=j.a,S=X.X;J.x=U.x+S.x*Y,J.y=U.y+S.y*Y,Y=j.u,J=X.X,Y=Y.x*J.x+Y.y*J.y,0>Y&&(Y*=j.i*X.i+1,U=J=j.u,X=X.X,J.x=U.x-X.x*Y,J.y=U.y-X.y*Y)}}N=0;for(W=this.I;N<W.length;)X=W[N],++N,(X.c&j.m)!=0&&(X.m&j.c)!=0&&j.Dg(X);N=0;for(W=this.v;N<W.length;)if(X=W[N],++N,(X.c&j.m)!=0&&(X.m&j.c)!=0&&(J=j.a,U=X.a,Y=J.x-U.x,J=J.y-U.y,U=Y*Y+J*J,0<U&&U<=j.M*j.M)){U=Math.sqrt(U),Y/=U,J/=U,U=j.M-U;let P=S=j.a;S.x=P.x+Y*U,S.y=P.y+J*U,U=j.u,U=Y*U.x+J*U.y,0>U&&(U*=j.i*X.i+1,S=X=j.u,X.x=S.x-Y*U,X.y=S.y-J*U)}}}for(_=0;2>_;)for(++_,$=0,j=this.Ta;$<j.length;)j[$++].Ba(this.A)}}class w0{static sa(_,$){_!=null&&_($)}}class f0{constructor(){}yg(){this.pa=m.qb(this.pa,40),this.ib=m.qb(this.ib,3)}G(_){this.yg(),_.ra=!0,_.Oa(this.pi),_.Uf(this.pa),_.Uf(this.ib),_.ge(this.Rc),_.ge(this.Tc),_.f(this.lb?1:0),_.f(this.xh),_.f(this.ba),_.ra=!1}}class e0{constructor(_){this.hf=new d0(15),this.Jd=0,this.He=new Map,this.Tg=new n0(100,16),this.cd=!1,this.$c=0,this.jc=_,_=M.aa(8),_.g(Math.random()),this.dc=_.Bb()}ob(_,$){$==null&&($=0),this.jc.ob($,_)}}class d0{constructor(_){let $=[],j=0;for(;j<_;)++j,$.push(0);this.gd=$,this.tc=this.hc=0}qg(_){this.tc-=this.gd[this.hc],this.gd[this.hc]=_,this.tc+=_,this.hc++,this.hc>=this.gd.length&&(this.hc=0)}ug(){return this.tc/this.gd.length}}class R{constructor(){this.v=[],this.I=[],this.Y=[],this.Sa=[],this.A=[],this.Ta=[],this.Pb=[],this.Ib=[],this.Mb=new o0,this.Fd=255,this.Bd=this.Qd=0,this.Cd=!0,this.dd=!1}Uc(){let _=new d;return _.T=16777215,_.c=63,_.m=193,_.M=10,_.ga=0.99,_.L=1,_.i=0.5,_}G(_){if(_.f(this.Fd),!this.gh()){_.Ca(this.pa),_.w(this.Ec),_.g(this.Fc),_.g(this.Dc),_.g(this.bc),_.g(this.ac),_.g(this.zd),_.w(this.Cc),_.g(this.cc),_.g(this.Gc),_.g(this.Ma),this.Mb.G(_),_.Oa(this.Qd),_.f(this.Bd),_.f(this.Cd?1:0),_.f(this.dd?1:0),_.f(this.v.length);for(var $=0,j=this.v.length;$<j;){var N=$++;let W=this.v[N];W.Kc=N,W.G(_)}_.f(this.I.length),$=0;for(j=this.I;$<j.length;)j[$++].G(_);_.f(this.Y.length),$=0;for(j=this.Y;$<j.length;)j[$++].G(_);_.f(this.Sa.length),$=0;for(j=this.Sa;$<j.length;)j[$++].G(_);_.f(this.A.length),$=0;for(j=this.A;$<j.length;)j[$++].G(_);_.f(this.Ta.length),$=0;for(j=this.Ta;$<j.length;)j[$++].G(_);_.f(this.Pb.length),$=0;for(j=this.Pb;$<j.length;)N=j[$],++$,_.g(N.x),_.g(N.y);_.f(this.Ib.length),$=0;for(j=this.Ib;$<j.length;)N=j[$],++$,_.g(N.x),_.g(N.y)}}oi(_){function $(){let X=[],Y=_.C(),J=0;for(;J<Y;){++J;let U=new F(0,0);U.x=_.o(),U.y=_.o(),X.push(U)}return X}this.pa=_.Ya(),this.Ec=_.H(),this.Fc=_.o(),this.Dc=_.o(),this.bc=_.o(),this.ac=_.o(),this.zd=_.o(),this.Cc=_.H(),this.cc=_.o(),this.Gc=_.o(),this.Ma=_.o(),this.Mb.qa(_),this.Qd=_.kc(),this.Bd=_.C(),this.Cd=_.C()!=0,this.dd=_.C()!=0,this.v=[];for(var j=_.C(),N=0;N<j;){var W=new B;W.qa(_),W.Kc=N++,this.v.push(W)}this.I=[],j=_.C();for(N=0;N<j;)++N,W=new I,W.qa(_,this.v),this.I.push(W);this.Y=[],j=_.C();for(N=0;N<j;)++N,W=new x,W.qa(_),this.Y.push(W);this.Sa=[],j=_.C();for(N=0;N<j;)++N,W=new o,W.qa(_),this.Sa.push(W);this.A=[],j=_.C();for(N=0;N<j;)++N,W=new d,W.qa(_),this.A.push(W);this.Ta=[],j=_.C();for(N=0;N<j;)++N,W=new l,W.qa(_),this.Ta.push(W);if(this.Pb=$(),this.Ib=$(),this.Nb(),!this.Rf())throw T.s(new L0("Invalid stadium"))}Rf(){return 0>=this.A.length||0>this.ac||0>this.bc||0>this.Mb.M?!1:!0}Nb(){let _=0,$=this.I;for(;_<$.length;)$[_++].Nb()}gh(){return this.Fd!=255}Kb(_,$){return _=_[$],_!=null?O.l(_,L):0}rh(_){return _=_.canBeStored,_!=null?O.l(_,Z1):!0}kh(_){function $(J){let U=O.l(J[0],L);return J=O.l(J[1],L),J==null&&(J=0),U==null&&(U=0),new F(U,J)}function j(J,U,S,P){P==null&&(P=!1);var D=N[U];if(!P||D!=null){if(P=O.l(D,Array),P!=null)for(D=0;D<P.length;){let K=P[D];++D;try{R.tg(K,X),J.push(S(K))}catch(p){throw T.s(new L0('Error in "'+U+'" index: '+J.length))}}}}let N=B1.default.parse(_);this.v=[],this.I=[],this.Y=[],this.Sa=[],this.A=[],this.Ta=[],this.pa=O.l(N.name,String),this.cc=O.l(N.width,L),this.Gc=O.l(N.height,L),this.Qd=this.Kb(N,"maxViewWidth")|0,N.cameraFollow=="player"&&(this.Bd=1),this.Ma=200,_=N.spawnDistance,_!=null&&(this.Ma=O.l(_,L)),_=N.bg;let W;switch(_.type){case"grass":W=1;break;case"hockey":W=2;break;default:W=0}this.Ec=W,this.Fc=this.Kb(_,"width"),this.Dc=this.Kb(_,"height"),this.bc=this.Kb(_,"kickOffRadius"),this.ac=this.Kb(_,"cornerRadius"),this.Cc=7441498,_.color!=null&&(this.Cc=R.Sc(_.color)),this.zd=this.Kb(_,"goalLine"),this.Cd=this.rh(N),this.dd=N.kickOffReset=="full";let X=N.traits;_=N.ballPhysics,_!="disc0"&&(_!=null?(_=R.df(_,this.Uc()),_.m|=192,this.A.push(_)):this.A.push(this.Uc())),j(this.v,"vertexes",R.qh);let Y=this;if(j(this.I,"segments",function(J){return R.ph(J,Y.v)}),j(this.Sa,"goals",R.lh),j(this.A,"discs",function(J){return R.df(J,new d)}),j(this.Y,"planes",R.nh),j(this.Ta,"joints",function(J){return R.mh(J,Y.A)},!0),j(this.Pb,"redSpawnPoints",$,!0),j(this.Ib,"blueSpawnPoints",$,!0),_=N.playerPhysics,_!=null&&(this.Mb=R.oh(_)),255<this.v.length||255<this.I.length||255<this.Y.length||255<this.Sa.length||255<this.A.length)throw T.s("Error");if(this.Nb(),!this.Rf())throw T.s(new L0("Invalid stadium"))}Ag(_,$){let j=0,N=this.Sa;for(;j<N.length;){let J=N[j];++j;var{F:W,K:X}=J,Y=$.x-_.x;let U=$.y-_.y;if(0<-(W.y-_.y)*Y+(W.x-_.x)*U==0<-(X.y-_.y)*Y+(X.x-_.x)*U?W=!1:(Y=X.x-W.x,X=X.y-W.y,W=0<-(_.y-W.y)*Y+(_.x-W.x)*X==0<-($.y-W.y)*Y+($.x-W.x)*X?!1:!0),W)return J.rc}return H.na}kb(_,$,j,N,W,X,Y,J){J==null&&(J=0),this.pa=_,this.A.push(this.Uc()),this.cc=$,this.Gc=j,this.Ec=1,this.Cc=7441498,this.Fc=N,this.Dc=W,this.bc=Y,this.ac=J,this.Ma=0.75*N,400<this.Ma&&(this.Ma=400),_=new x;var U=_.X;U.x=0,U.y=1,_.ka=-j,_.i=0,this.Y.push(_),_=new x,U=_.X,U.x=0,U.y=-1,_.ka=-j,_.i=0,this.Y.push(_),_=new x,U=_.X,U.x=1,U.y=0,_.ka=-$,_.i=0,this.Y.push(_),_=new x,U=_.X,U.x=-1,U.y=0,_.ka=-$,_.i=0,this.Y.push(_),this.Vc(N,1,X,13421823,H.ta),this.Vc(-N,-1,X,16764108,H.fa),this.gf(Y,j),$=new x,j=$.X,j.x=0,j.y=1,$.ka=-W,$.c=1,this.Y.push($),$=new x,j=$.X,j.x=0,j.y=-1,$.ka=-W,$.c=1,this.Y.push($),$=new B,j=$.a,j.x=-N,j.y=-W,$.c=0,j=new B,Y=j.a,Y.x=N,Y.y=-W,j.c=0,Y=new B,_=Y.a,_.x=N,_.y=-X,Y.c=0,_=new B,U=_.a,U.x=N,U.y=X,_.c=0,U=new B;var S=U.a;S.x=N,S.y=W,U.c=0,S=new B;var P=S.a;P.x=-N,P.y=W,S.c=0,P=new B;var D=P.a;D.x=-N,D.y=X,P.c=0,D=new B;var K=D.a;K.x=-N,K.y=-X,D.c=0,X=new I,X.F=j,X.K=Y,X.c=1,X.va=!1,K=new I,K.F=_,K.K=U,K.c=1,K.va=!1;let p=new I;p.F=S,p.K=P,p.c=1,p.va=!1;let A0=new I;A0.F=D,A0.K=$,A0.c=1,A0.va=!1,this.v.push($),this.v.push(j),this.v.push(Y),this.v.push(_),this.v.push(U),this.v.push(S),this.v.push(P),this.v.push(D),this.I.push(X),this.I.push(K),this.I.push(p),this.I.push(A0),this.ef(N,W,J),this.Nb()}ff(_,$,j,N,W,X,Y,J){this.pa=_,this.A.push(this.Uc()),this.cc=$,this.Gc=j,this.Ec=2,this.Fc=N,this.Dc=W,this.bc=75,this.ac=J,this.zd=Y,this.Ma=0.75*(N-Y),400<this.Ma&&(this.Ma=400),_=new x;var U=_.X;U.x=0,U.y=1,_.ka=-j,_.i=0,this.Y.push(_),_=new x,U=_.X,U.x=0,U.y=-1,_.ka=-j,_.i=0,this.Y.push(_),_=new x,U=_.X,U.x=1,U.y=0,_.ka=-$,_.i=0,this.Y.push(_),_=new x,U=_.X,U.x=-1,U.y=0,_.ka=-$,_.i=0,this.Y.push(_),this.Vc(N-Y,1,X,13421823,H.ta,63),this.Vc(-N+Y,-1,X,16764108,H.fa,63),this.gf(75,j),$=new x,j=$.X,j.x=0,j.y=1,$.ka=-W,$.c=1,this.Y.push($),$=new x,j=$.X,j.x=0,j.y=-1,$.ka=-W,$.c=1,this.Y.push($),$=new x,j=$.X,j.x=1,j.y=0,$.ka=-N,$.c=1,this.Y.push($),$=new x,j=$.X,j.x=-1,j.y=0,$.ka=-N,$.c=1,this.Y.push($),this.ef(N,W,J),this.Nb()}Vc(_,$,j,N,W,X){var Y;Y==null&&(Y=32),X==null&&(X=1);var J=new B,U=J.a;U.x=_+8*$,U.y=-j,U=new B;var S=U.a;S.x=_+8*$,S.y=j;let P=new B;S=P.a,S.x=J.a.x+22*$,S.y=J.a.y+22;let D=new B;S=D.a,S.x=U.a.x+22*$,S.y=U.a.y-22,S=new I,S.F=J,S.K=P,S.bb(90*$);let K=new I;K.F=D,K.K=P;let p=new I;p.F=D,p.K=U,p.bb(90*$),$=this.v.length,this.v.push(J),this.v.push(U),this.v.push(P),this.v.push(D),J=$;for($=this.v.length;J<$;)U=J++,this.v[U].c=X,this.v[U].m=Y,this.v[U].i=0.1;$=this.I.length,this.I.push(S),this.I.push(K),this.I.push(p),J=$;for($=this.I.length;J<$;)U=J++,this.I[U].c=X,this.I[U].m=Y,this.I[U].i=0.1;X=new d,Y=X.a,Y.x=_,Y.y=-j,X.L=0,X.M=8,X.T=N,this.A.push(X),X=new d,Y=X.a,Y.x=_,Y.y=j,X.L=0,X.M=8,X.T=N,this.A.push(X),N=new o,X=N.F,X.x=_,X.y=-j,X=N.K,X.x=_,X.y=j,N.rc=W,this.Sa.push(N)}gf(_,$){let j=new B;var N=j.a;N.x=0,N.y=-$,j.i=0.1,j.m=24,j.c=6,N=new B;var W=N.a;W.x=0,W.y=-_,N.i=0.1,N.m=24,N.c=6,W=new B;var X=W.a;X.x=0,X.y=_,W.i=0.1,W.m=24,W.c=6,_=new B,X=_.a,X.x=0,X.y=$,_.i=0.1,_.m=24,_.c=6,$=new I,$.F=j,$.K=N,$.m=24,$.c=6,$.va=!1,$.i=0.1,X=new I,X.F=W,X.K=_,X.m=24,X.c=6,X.va=!1,X.i=0.1;let Y=new I;Y.F=N,Y.K=W,Y.m=8,Y.c=6,Y.va=!1,Y.bb(180),Y.i=0.1;let J=new I;J.F=W,J.K=N,J.m=16,J.c=6,J.va=!1,J.bb(180),J.i=0.1,this.v.push(j),this.v.push(N),this.v.push(W),this.v.push(_),this.I.push($),this.I.push(X),this.I.push(Y),this.I.push(J)}ef(_,$,j){if(!(0>=j)){var N=new B,W=N.a;W.x=-_+j,W.y=-$,N.c=0,W=new B;var X=W.a;X.x=-_,X.y=-$+j,W.c=0,X=new B;var Y=X.a;Y.x=-_+j,Y.y=$,X.c=0,Y=new B;var J=Y.a;J.x=-_,J.y=$-j,Y.c=0,J=new B;var U=J.a;U.x=_-j,U.y=$,J.c=0,U=new B;var S=U.a;S.x=_,S.y=$-j,U.c=0,S=new B;var P=S.a;P.x=_-j,P.y=-$,S.c=0,P=new B;var D=P.a;D.x=_,D.y=-$+j,P.c=0,_=new I,_.F=N,_.K=W,_.c=1,_.va=!1,_.i=1,_.bb(-90),$=new I,$.F=X,$.K=Y,$.c=1,$.va=!1,$.i=1,$.bb(90),j=new I,j.F=J,j.K=U,j.c=1,j.va=!1,j.i=1,j.bb(-90),D=new I,D.F=S,D.K=P,D.c=1,D.va=!1,D.i=1,D.bb(90),this.v.push(N),this.v.push(W),this.v.push(X),this.v.push(Y),this.v.push(J),this.v.push(U),this.v.push(S),this.v.push(P),this.I.push(_),this.I.push($),this.I.push(j),this.I.push(D)}}static qa(_){var $=_.C();return $==255?($=new R,$.oi(_),$):R.Gd()[$]}static Gd(){if(R.wa==null){R.wa=[];var _=new R;_.kb("Classic",420,200,370,170,64,75),R.wa.push(_),_=new R,_.kb("Easy",420,200,370,170,90,75),R.wa.push(_),_=new R,_.kb("Small",420,200,320,130,55,70),R.wa.push(_),_=new R,_.kb("Big",600,270,550,240,80,80),R.wa.push(_),_=new R,_.kb("Rounded",420,200,370,170,64,75,75),R.wa.push(_),_=new R,_.ff("Hockey",420,204,398,182,68,120,100),R.wa.push(_),_=new R,_.ff("Big Hockey",600,270,550,240,90,160,150),R.wa.push(_),_=new R,_.kb("Big Easy",600,270,550,240,95,80),R.wa.push(_),_=new R,_.kb("Big Rounded",600,270,550,240,80,75,100),R.wa.push(_),_=new R,_.kb("Huge",750,350,700,320,100,80),R.wa.push(_),_=0;let $=R.wa.length;for(;_<$;){let j=_++;R.wa[j].Fd=j}}return R.wa}static tg(_,$){if(_.trait!=null&&($=$[O.l(_.trait,String)],$!=null)){let j=0,N=T1.zi($);for(;j<N.length;){let W=N[j];++j,_[W]==null&&(_[W]=$[W])}}}static Ua(_){_=O.l(_,Array);let $=0,j=0;for(;j<_.length;)switch(_[j++]){case"all":$|=63;break;case"ball":$|=1;break;case"blue":$|=4;break;case"blueKO":$|=16;break;case"c0":$|=268435456;break;case"c1":$|=536870912;break;case"c2":$|=1073741824;break;case"c3":$|=-2147483648;break;case"kick":$|=64;break;case"red":$|=2;break;case"redKO":$|=8;break;case"score":$|=128;break;case"wall":$|=32}return $}static Sc(_){if(_=="transparent")return-1;if(typeof _=="string")return p0.parseInt("0x"+p0.xe(_));if(_ instanceof Array)return((_[0]|0)<<16)+((_[1]|0)<<8)+(_[2]|0);throw T.s("Bad color")}static qh(_){let $=new B;$.a.x=O.l(_.x,L),$.a.y=O.l(_.y,L);var j=_.bCoef;return j!=null&&($.i=O.l(j,L)),j=_.cMask,j!=null&&($.c=R.Ua(j)),_=_.cGroup,_!=null&&($.m=R.Ua(_)),$}static ph(_,$){let j=new I;var N=O.l(_.v1,h0);j.F=$[O.l(_.v0,h0)],j.K=$[N],$=_.bias,N=_.bCoef;let{curve:W,curveF:X,vis:Y,cMask:J,cGroup:U}=_;return _=_.color,$!=null&&(j.ub=O.l($,L)),N!=null&&(j.i=O.l(N,L)),X!=null?j.Ha=O.l(X,L):W!=null&&j.bb(O.l(W,L)),Y!=null&&(j.va=O.l(Y,Z1)),J!=null&&(j.c=R.Ua(J)),U!=null&&(j.m=R.Ua(U)),_!=null&&(j.T=R.Sc(_)),j}static mh(_,$){let j=new l;var N=O.l(_.d0,h0),W=O.l(_.d1,h0);let{color:X,strength:Y}=_;if(_=_.length,N>=$.length||0>N)throw T.s(null);if(W>=$.length||0>W)throw T.s(null);return j.Ic=N,j.Jc=W,_==null?(N=$[N],W=$[W],N==null||W==null?j.Va=j.Ka=100:($=N.a,N=W.a,W=$.x-N.x,$=$.y-N.y,j.Va=j.Ka=Math.sqrt(W*W+$*$))):_ instanceof Array?(j.Ka=O.l(_[0],L),j.Va=O.l(_[1],L)):j.Va=j.Ka=O.l(_,L),j.qc=Y==null||Y=="rigid"?1/0:O.l(Y,L),X!=null&&(j.T=R.Sc(X)),j}static nh(_){let $=new x;var j=O.l(_.normal,Array),N=O.l(j[0],L),W=O.l(j[1],L);j=$.X;let X=N;var Y=W;return W==null&&(Y=0),N==null&&(X=0),N=X,W=Math.sqrt(N*N+Y*Y),j.x=N/W,j.y=Y/W,$.ka=O.l(_.dist,L),j=_.bCoef,N=_.cMask,_=_.cGroup,j!=null&&($.i=O.l(j,L)),N!=null&&($.c=R.Ua(N)),_!=null&&($.m=R.Ua(_)),$}static lh(_){let $=new o;var j=O.l(_.p0,Array);let N=O.l(_.p1,Array),W=$.F;switch(W.x=j[0],W.y=j[1],j=$.K,j.x=N[0],j.y=N[1],_.team){case"blue":_=H.ta;break;case"red":_=H.fa;break;default:throw T.s("Bad team value")}return $.rc=_,$}static oh(_){let $=new o0;var{bCoef:j,invMass:N}=_;let{damping:W,acceleration:X,kickingAcceleration:Y,kickingDamping:J,kickStrength:U,gravity:S,cGroup:P,radius:D}=_;return _=_.kickback,j!=null&&($.i=O.l(j,L)),N!=null&&($.L=O.l(N,L)),W!=null&&($.ga=O.l(W,L)),X!=null&&($.zc=O.l(X,L)),Y!=null&&($.Oc=O.l(Y,L)),J!=null&&($.Pc=O.l(J,L)),U!=null&&($.Mc=O.l(U,L)),S!=null&&(j=$.la,N=O.l(S[1],L),j.x=O.l(S[0],L),j.y=N),P!=null&&($.m=R.Ua(P)),D!=null&&($.M=O.l(D,L)),_!=null&&($.Nc=O.l(_,L)),$}static df(_,$){var{pos:j,speed:N}=_;let{gravity:W,radius:X,bCoef:Y,invMass:J,damping:U,color:S,cMask:P}=_;if(_=_.cGroup,j!=null){let D=$.a;D.x=j[0],D.y=j[1]}return N!=null&&(j=$.u,j.x=N[0],j.y=N[1]),W!=null&&(N=$.la,N.x=W[0],N.y=W[1]),X!=null&&($.M=O.l(X,L)),Y!=null&&($.i=O.l(Y,L)),J!=null&&($.L=O.l(J,L)),U!=null&&($.ga=O.l(U,L)),S!=null&&($.T=R.Sc(S)),P!=null&&($.c=R.Ua(P)),_!=null&&($.m=R.Ua(_)),$}}class a{}class u0{static sa(_,$,j){_!=null&&_($,j)}}class V{constructor(){V.Ja||this.Aa()}Aa(){this.eg=this.fg=this.fb=0}dg(){return!0}apply(){throw T.s("missing implementation")}W(){throw T.s("missing implementation")}P(){throw T.s("missing implementation")}static Z(_){return _.delay==null&&(_.delay=!0),_.ca==null&&(_.ca=!0),_}static $(_){if(_.kg=V.je,_.U==null)throw T.s("Class doesn't have a config");_.prototype.le=_.U,V.Zf.set(V.je,_),V.je++}static ue(_,$){let j=O.Yf(_).kg;if(j==null)throw T.s("Tried to pack unregistered action");$.f(j),_.P($)}static Hi(_){var $=_.C();return $=Object.create(V.Zf.get($).prototype),$.fb=0,$.eb=0,$.W(_),$}}class M{constructor(_,$){$==null&&($=!1),this.j=_,this.ra=$,this.a=0}fe(){let _=new ArrayBuffer(this.a),$=new Uint8Array(this.j.buffer,this.j.byteOffset,this.a);return new Uint8Array(_).set($),_}Bb(){return new Uint8Array(this.j.buffer,this.j.byteOffset,this.a)}Sb(){return new DataView(this.j.buffer,this.j.byteOffset,this.a)}mi(){return new t(this.Sb(),this.ra)}Ia(_){this.j.byteLength<_&&this.Rh(2*this.j.byteLength>=_?2*this.j.byteLength:_)}Rh(_){if(1>_)throw T.s("Can't resize buffer to a capacity lower than 1");if(this.j.byteLength<_){let $=new Uint8Array(this.j.buffer);_=new ArrayBuffer(_),new Uint8Array(_).set($),this.j=new DataView(_)}}f(_){let $=this.a++;this.Ia(this.a),this.j.setUint8($,_)}he(_){let $=this.a;this.a+=2,this.Ia(this.a),this.j.setInt16($,_,this.ra)}Oa(_){let $=this.a;this.a+=2,this.Ia(this.a),this.j.setUint16($,_,this.ra)}w(_){let $=this.a;this.a+=4,this.Ia(this.a),this.j.setInt32($,_,this.ra)}xa(_){let $=this.a;this.a+=4,this.Ia(this.a),this.j.setUint32($,_,this.ra)}ge(_){let $=this.a;this.a+=4,this.Ia(this.a),this.j.setFloat32($,_,this.ra)}g(_){let $=this.a;this.a+=8,this.Ia(this.a),this.j.setFloat64($,_,this.ra)}pb(_){let $=this.a;this.a+=_.byteLength,this.Ia(this.a),new Uint8Array(this.j.buffer,this.j.byteOffset,this.j.byteLength).set(_,$)}ti(_){_=new Uint8Array(_.buffer,_.byteOffset,_.byteLength),this.pb(_)}Sf(_){this.pb(new Uint8Array(_))}Tb(_){this.Da(M.Ad(_)),this.ie(_)}Ca(_){_==null?this.Da(0):(this.Da(M.Ad(_)+1),this.ie(_))}Uf(_){_=new TextEncoder().encode(_);let $=_.length;if(255<$)throw T.s(null);this.f($),this.ti(_)}Tf(_){this.Tb(JSON.stringify(_))}ie(_){let $=this.a;this.Ia($+M.Ad(_));let j=_.length,N=0;for(;N<j;)$+=M.Ng(h.Wf(_,N++),this.j,$);this.a=$}Da(_){let $=this.a;_>>>=0,this.Ia($+M.xg(_)),this.j.setUint8($,_|128),128<=_?(this.j.setUint8($+1,_>>7|128),16384<=_?(this.j.setUint8($+2,_>>14|128),2097152<=_?(this.j.setUint8($+3,_>>21|128),268435456<=_?(this.j.setUint8($+4,_>>28&127),_=5):(this.j.setUint8($+3,this.j.getUint8($+3)&127),_=4)):(this.j.setUint8($+2,this.j.getUint8($+2)&127),_=3)):(this.j.setUint8($+1,this.j.getUint8($+1)&127),_=2)):(this.j.setUint8($,this.j.getUint8($)&127),_=1),this.a+=_}static aa(_,$){return $==null&&($=!1),_==null&&(_=16),new M(new DataView(new ArrayBuffer(_)),$)}static Ng(_,$,j){let N=j;if(0>_)throw T.s("Cannot encode UTF8 character: charCode ("+_+") is negative");if(128>_)$.setUint8(j,_&127),++j;else if(2048>_)$.setUint8(j,_>>6&31|192),$.setUint8(j+1,_&63|128),j+=2;else if(65536>_)$.setUint8(j,_>>12&15|224),$.setUint8(j+1,_>>6&63|128),$.setUint8(j+2,_&63|128),j+=3;else if(2097152>_)$.setUint8(j,_>>18&7|240),$.setUint8(j+1,_>>12&63|128),$.setUint8(j+2,_>>6&63|128),$.setUint8(j+3,_&63|128),j+=4;else if(67108864>_)$.setUint8(j,_>>24&3|248),$.setUint8(j+1,_>>18&63|128),$.setUint8(j+2,_>>12&63|128),$.setUint8(j+3,_>>6&63|128),$.setUint8(j+4,_&63|128),j+=5;else if(-2147483648>_)$.setUint8(j,_>>30&1|252),$.setUint8(j+1,_>>24&63|128),$.setUint8(j+2,_>>18&63|128),$.setUint8(j+3,_>>12&63|128),$.setUint8(j+4,_>>6&63|128),$.setUint8(j+5,_&63|128),j+=6;else throw T.s("Cannot encode UTF8 character: charCode ("+_+") is too large (>= 0x80000000)");return j-N}static wg(_){if(0>_)throw T.s("Cannot calculate length of UTF8 character: charCode ("+_+") is negative");if(128>_)return 1;if(2048>_)return 2;if(65536>_)return 3;if(2097152>_)return 4;if(67108864>_)return 5;if(-2147483648>_)return 6;throw T.s("Cannot calculate length of UTF8 character: charCode ("+_+") is too large (>= 0x80000000)")}static Ad(_){let $=0,j=_.length,N=0;for(;N<j;)$+=M.wg(h.Wf(_,N++));return $}static xg(_){return _>>>=0,128>_?1:16384>_?2:2097152>_?3:268435456>_?4:5}}class U0{static ri(_,$){try{let j=new t(new DataView(_.buffer,_.byteOffset,_.byteLength),!1);j.C();let N=j.La(j.kc()),W=j.La(),X=new t(new DataView(N.buffer,N.byteOffset,N.byteLength),!1),Y=X.mb(),J=X.mb(),U=X.La();if(U.byteLength!=$.byteLength)return Promise.reject(null);_=0;let S=U.byteLength;for(;_<S;){let P=_++;if(U[P]!=$[P])return Promise.reject(null)}return U0.ui(Y,J).then(function(P){return z1.subtle.verify(U0.ci,P,W,N)}).then(function(P){if(!P)throw T.s(null);return Y})}catch(j){return Promise.reject(T.Vb(j).Hb())}}static ui(_,$){try{return z1.subtle.importKey("jwk",{crv:"P-256",ext:!0,key_ops:["verify"],kty:"EC",x:_,y:$},U0.sg,!0,["verify"])}catch(j){return Promise.reject(T.Vb(j).Hb())}}}class I{constructor(){this.jd=this.kd=this.X=null,this.Oe=0,this.K=this.F=this.ec=null,this.ub=0,this.i=1,this.c=63,this.m=32,this.Ha=1/0,this.va=!0,this.T=0}G(_){let $=0,j=_.a;_.f(0),_.f(this.F.Kc),_.f(this.K.Kc),this.ub!=0&&($=1,_.g(this.ub)),this.Ha!=1/0&&($|=2,_.g(this.Ha)),this.T!=0&&($|=4,_.w(this.T)),this.va&&($|=8),_.j.setUint8(j,$),_.g(this.i),_.w(this.c),_.w(this.m)}qa(_,$){let j=_.C();this.F=$[_.C()],this.K=$[_.C()],this.ub=(j&1)!=0?_.o():0,this.Ha=(j&2)!=0?_.o():1/0,this.T=(j&4)!=0?_.H():0,this.va=(j&8)!=0,this.i=_.o(),this.c=_.H(),this.m=_.H()}bb(_){if(_*=0.017453292519943295,0>_){_=-_;let $=this.F;this.F=this.K,this.K=$,this.ub=-this.ub}_>I.jg&&_<I.ig&&(this.Ha=1/Math.tan(_/2))}Nb(){if(0*this.Ha==0){var _=this.K.a,$=this.F.a,j=0.5*(_.x-$.x);_=0.5*(_.y-$.y),$=this.F.a;let N=this.Ha;this.ec=new F($.x+j+-_*N,$.y+_+j*N),_=this.F.a,$=this.ec,j=_.x-$.x,_=_.y-$.y,this.Oe=Math.sqrt(j*j+_*_),j=this.F.a,_=this.ec,this.jd=new F(-(j.y-_.y),j.x-_.x),j=this.ec,_=this.K.a,this.kd=new F(-(j.y-_.y),j.x-_.x),0>=this.Ha&&(_=j=this.jd,j.x=-_.x,j.y=-_.y,_=j=this.kd,j.x=-_.x,j.y=-_.y)}else _=this.F.a,$=this.K.a,j=_.x-$.x,_=-(_.y-$.y),$=Math.sqrt(_*_+j*j),this.X=new F(_/$,j/$)}}class O1{static Ci(){V.$(_0),V.$(F0),V.$(V0),V.$(E0),V.$(T0),V.$(N0),V.$(k),V.$(P0),V.$(H0),V.$(O0),V.$(f),V.$(e),V.$(j0),V.$(S0),V.$($0),V.$(I0),V.$(i0),V.$(Z0),V.$(y0),V.$(Q0),V.$(X0),V.$(Y0),V.$(W0),V.$(w)}}class q0{constructor(){this.ea=null,this.Xc=2,this.fc=0,this.Pd=1,this.ab=this.Na=3,this.md=!1,this.D=null,this.ba=[],this.Xd="",this.ea=R.Gd()[0],this.sc=[null,new b,new b],this.sc[1].Qa.push(H.fa.T),this.sc[2].Qa.push(H.ta.T)}ei(_){if(this.D==null){this.D=new r;for(var $=0,j=this.ba;$<j.length;){let N=j[$];++$,N.N=null,N.Eb=0}this.D.eh(this),this.Jf!=null&&this.Jf(_)}}Hc(_,$,j){if($.ja!=j){if($.ja=j,h.remove(this.ba,$),this.ba.push($),this.D!=null){$.N!=null&&(h.remove(this.D.ia.A,$.N),$.N=null),this.D.$e($);let N=0,W=!1;for(;!W;){++N,W=!0;let X=0,Y=this.ba;for(;X<Y.length;){let J=Y[X];if(++X,J!=$&&J.ja==$.ja&&J.Eb==N){W=!1;break}}}$.Eb=N}N1.sa(this.Gh,_,$,j)}}R(_){let $=0,j=this.ba;for(;$<j.length;){let N=j[$];if(++$,N.ma==_)return N}return null}Ba(_){this.D!=null&&this.D.Ba(_)}G(_){_.Ca(this.Xd),_.f(this.md?1:0),_.w(this.ab),_.w(this.Na),_.he(this.Pd),_.f(this.fc),_.f(this.Xc),this.ea.G(_),_.f(this.D!=null?1:0),this.D!=null&&this.D.G(_),_.f(this.ba.length);let $=0,j=this.ba;for(;$<j.length;)j[$++].P(_);this.sc[1].G(_),this.sc[2].G(_)}Ue(){let _=0;var $=M.aa();this.G($);for($=$.mi();4<=$.j.byteLength-$.a;)_^=$.H();return _}Qg(){let _=M.aa(4);return _.w(this.Ue()),_.fe()}Eg(_){_=new t(new DataView(_)).H(),w0.sa(this.Ii,this.Ue()!=_)}Gf(_){this.yf=_}za(_){if(_==0)return!0;return _=this.R(_),_!=null&&_.Ub?!0:!1}ai(_,$,j,N){this.Xc=0>$?0:255<$?255:$,this.fc=0>j?0:255<j?255:j,0>N?N=0:100<N&&(N=100),this.Pd=this.fc*N,k0.sa(this.hh,_,this.Xc,this.fc,N)}}class y{static sh(){O1.Ci(),c.Sg().then(function(_){y.Se=_},function(){}).then(function(){F1(y.fi);let _=l1;_!=null&&_()}),y.Vh=null}static bi(_,$,j){y.bd==null&&(y.bd=null,y.Ph=_.render(y.bd,{sitekey:$,callback:function(N){y.Wd!=null&&y.Wd(N)}})),y.bd.hidden=!1,_.reset(y.Ph),y.Wd=function(N){setTimeout(function(){y.bd.hidden=!0,j(N)},1000),y.Wd=null}}static uh(_,$){return"https://www.haxball.com/play?c="+_+($?"&p=1":"")}static fi(_){function $(){if(!U){var Z=new f0;Z.pi=9,Z.pa=G.Xd,Z.ba=G.ba.length-(D?0:1),Z.xh=i.Wc,Z.ib=l0.ib,Z.lb=i.lb!=null,Z.Rc=l0.Rc,Z.Tc=l0.Tc;var Q=M.aa(16);Z.G(Q),i.be(Q.fe())}}function j(Z){P1.then(function(){i.nc(Z)})}function N(Z){return Z==null?null:{x:Z.a.x,y:Z.a.y,xspeed:Z.u.x,yspeed:Z.u.y,xgravity:Z.la.x,ygravity:Z.la.y,radius:Z.M,bCoeff:Z.i,invMass:Z.L,damping:Z.ga,color:Z.T,cMask:Z.c,cGroup:Z.m}}function W(){return G.D==null?null:{red:G.D.zb,blue:G.D.vb,time:G.D.Lb,scoreLimit:G.D.ab,timeLimit:60*G.D.Na}}function X(Z){if(Z==null)return null;let Q=null,s=Z.N;return s!=null&&(Q={x:s.a.x,y:s.a.y}),{name:Z.pa,team:Z.ja.S,id:Z.ma,admin:Z.Ub,position:Q}}function Y(Z,Q){return Z=_[Z],Z==null?Q:O.l(Z,String)}function J(Z,Q){return Z=_[Z],Z==null?Q:Z}if(y.Ff)throw T.s("Can't init twice");y.Ff=!0;let U=!J("public",!1);var S=Y("roomName","Headless Room");let P=Y("playerName","Host"),D=J("noPlayer",!1),K=O.l(J("maxPlayers",12),h0),p=Y("password",null),A0=Y("token",null),s1=J("geo",null),l0=y.Se;if(s1!=null&&(l0=c.Te(s1),3<l0.ib.length))throw T.s("Invalid country code");let G=new q0;G.Xd=S,D||(S=new B0,S.pa=P,S.Ub=!0,S.country=l0.ib,G.ba.push(S));let i=new r0({iceServers:z0.Md,Ei:z0.Ke+"api/host",state:G,version:9,Gi:A0});i.Wc=2>K?2:30<K?30:K,i.lb=p;let P1=Promise.resolve();$();let J1=null,A={sendChat:function(Z,Q){let s=new T0;s.Pa=Z,Q!=null?P1.then(function(){i.Df(s,Q)}):j(s)},sendAnnouncement:function(Z,Q,s,E,v){E={bold:1,italic:2,small:3,"small-bold":4,"small-italic":5}[E],E==null&&(E=0),s==null&&(s=-1),v==null&&(v=1);let s0=_0.V(Z,s,E,v);Q!=null?P1.then(function(){i.Df(s0,Q)}):j(s0)},setPlayerAdmin:function(Z,Q){j($0.V(Z,Q))},setPlayerTeam:function(Z,Q){j(j0.V(Z,Q==1?H.fa:Q==2?H.ta:H.na))},setPlayerAvatar:function(Z,Q){j(W0.V(Z,Q))},kickPlayer:function(Z,Q,s){Q==null&&(Q=""),j(k.V(Z,Q,s))},clearBan:function(Z){i.Dd(Z)},clearBans:function(){i.Ed()},setScoreLimit:function(Z){j(f.V(0,Z))},setTimeLimit:function(Z){j(f.V(1,Z))},setCustomStadium:function(Z){let Q=new R;try{Q.kh(Z)}catch(s){throw T.s(T.Vb(s).Hb())}j(e.V(Q))},setDefaultStadium:function(Z){let Q=R.Gd(),s=null,E=0;for(;E<Q.length;){let v=Q[E];if(++E,v.pa==Z){s=v;break}}if(s==null)throw T.s("Stadium doesn't exist");j(e.V(s))},setDiscProperties:function(Z,Q){j(w.ag(Z,!1,Q))},setPlayerDiscProperties:function(Z,Q){j(w.ag(Z,!0,Q))},setTeamColors:function(Z,Q,s,E){let v=new Q0,s0=new b;v.rd=s0,v.ja=Z==1?H.fa:Z==2?H.ta:H.na,s0.Qa=[];var U1=E.length;Z=0;for(U1=3>U1?U1:3;Z<U1;)s0.Qa.push(E[Z++]|0);s0.de=s|0,s0.Je=256*Q/360|0,j(v)},setKickRateLimit:function(Z,Q,s){Z==null&&(Z=2),Q==null&&(Q=0),s==null&&(s=0),Z=Y0.V(Z,Q,s),j(Z)},startGame:function(){j(new P0)},stopGame:function(){j(new H0)},pauseGame:function(Z){let Q=new O0;Q.wc=Z,j(Q)},setTeamsLock:function(Z){let Q=new S0;Q.newValue=Z,j(Q)},setPassword:function(Z){i.lb=Z==null?null:O.l(Z,String),$()},setRequireRecaptcha:function(Z){i.ae(O.l(Z,Z1))},getPlayerList:function(){let Z=[],Q=0,s=G.ba;for(;Q<s.length;)Z.push(X(s[Q++]));return Z},getPlayer:function(Z){return Z=G.R(Z),Z==null?null:X(Z)},getScores:function(){return W()},getBallPosition:function(){var Z=G.D;if(Z==null)return null;return Z=Z.ia.A[0].a,{x:Z.x,y:Z.y}},getPlayerDiscProperties:function(Z){if(G.D==null)return null;return Z=G.R(Z),Z==null?null:N(Z.N)},getDiscProperties:function(Z){let Q=G.D;return Q==null?null:N(Q.ia.A[Z])},getDiscCount:function(){let Z=G.D;return Z==null?0:Z.ia.A.length},startRecording:function(){J1=new c0(i,3)},stopRecording:function(){if(J1==null)return null;let Z=J1.stop();return J1=null,Z},reorderPlayers:function(Z,Q){j(X0.V(Z,Q))},CollisionFlags:{ball:1,red:2,blue:4,redKO:8,blueKO:16,wall:32,kick:64,score:128,c0:268435456,c1:536870912,c2:1073741824,c3:-2147483648,all:63}};return i.ic=function(Z,Q){D0.jh().then(function(s){y.bi(s,Z,Q)})},setInterval(function(){i.Ba()},50),setInterval(function(){i.nc(Z0.V(i))},3000),i.kf=function(Z){G.R(Z)!=null&&i.nc(k.V(Z,"Bad actor",!1))},i.yh=function(Z,Q){let s=Q.mb();if(25<s.length)throw T.s("name too long");let E=Q.mb();if(3<E.length)throw T.s("country too long");if(Q=Q.Ya(),Q!=null&&2<Q.length)throw T.s("avatar too long");i.nc(N0.V(Z,s,E,Q)),$()},i.zh=function(Z){G.R(Z)!=null&&i.nc(k.V(Z,null,!1))},i.Yc=function(Z){Z=y.uh(Z,i.lb!=null),y.Vh='<p>Room Link: <a href="'+Z+'">'+Z+"</a></p>";{let Q=A.onRoomLink;Q!=null&&Q(Z)}},G.Eh=function(Z){var Q=i.wb.get(Z.ma),s=null,E=null;Q!=null&&(s=Q.Ig,E=Q.jc.hb),Q=s,s=A.onPlayerJoin,s!=null&&(Z=X(Z),Z.auth=Q,Z.conn=E,s(Z))},G.Mf=function(){{let Z=A.onTeamVictory;Z!=null&&G.D!=null&&Z(W())}},G.tf=function(Z,Q){let s=A.onPlayerChat;return s==null?!0:s(X(Z),Q)!=0},G.vf=function(Z){let Q=A.onPlayerBallKick;Q!=null&&Q(X(Z))},G.Lf=function(Z){let Q=A.onTeamGoal;Q!=null&&G.D!=null&&Q(Z.S)},G.Jf=function(Z){let Q=A.onGameStart;Q!=null&&Q(X(Z))},G.ld=function(Z){let Q=A.onGameStop;Q!=null&&Q(X(Z))},G.Gh=function(Z,Q){let s=A.onPlayerTeamChange;s!=null&&s(X(Q),X(Z))},G.sf=function(Z,Q){let s=A.onPlayerAdminChange;s!=null&&s(X(Q),X(Z))},G.Og=function(){let Z=A.onGameTick;Z!=null&&Z()},G.Ch=function(Z,Q){Q=A[Q?"onGamePause":"onGameUnpause"],Q!=null&&Q(X(Z))},G.wf=function(){let Z=A.onPositionsReset;Z!=null&&Z()},G.uf=function(Z){{let Q=A.onPlayerActivity;Q!=null&&Q(X(Z))}},G.Hf=function(Z,Q){let s=A.onStadiumChange;s!=null&&s(Q.pa,X(Z))},G.Fh=function(Z,Q,s,E){$();var v=A.onPlayerLeave;v!=null&&v(X(Z)),Q!=null&&(v=null,E!=null&&(v=E.pa),i.Mg(Z.ma,Q,v,s),v=A.onPlayerKicked,v!=null&&v(X(Z),Q,s,X(E)))},G.hh=function(Z,Q,s,E){let v=A.onKickRateLimitSet;v!=null&&v(Q,s,E,X(Z))},G.ii=function(Z,Q){let s=A.onTeamsLockChange;s!=null&&s(Q,X(Z))},A}}class p0{static xe(_){return O.Zb(_,"")}static parseInt(_){return _=parseInt(_),isNaN(_)?null:_}}class q{constructor(_){q.Ja||this.Aa(_)}Aa(_){this.da=0,this.Fa=_}}class M0{constructor(){this.rf=0,this.c=this.m=63,this.T=16777215,this.ga=0.99,this.L=1,this.i=0.5,this.M=10,this.la=new F(0,0),this.u=new F(0,0),this.a=new F(0,0)}G(_){var $=this.a;_.g($.x),_.g($.y),$=this.u,_.g($.x),_.g($.y),$=this.la,_.g($.x),_.g($.y),_.g(this.M),_.g(this.i),_.g(this.L),_.g(this.ga),_.xa(this.T),_.w(this.c),_.w(this.m)}Cg(_){var $=this.a,j=_.a,N=$.x-j.x;$=$.y-j.y;var W=_.M+this.M,X=N*N+$*$;if(0<X&&X<=W*W){X=Math.sqrt(X),N/=X,$/=X,j=this.L/(this.L+_.L),W-=X,X=W*j;var Y=this.a,J=this.a;Y.x=J.x+N*X,Y.y=J.y+$*X,J=Y=_.a,W-=X,Y.x=J.x-N*W,Y.y=J.y-$*W,W=this.u,X=_.u,W=N*(W.x-X.x)+$*(W.y-X.y),0>W&&(W*=this.i*_.i+1,j*=W,Y=X=this.u,X.x=Y.x-N*j,X.y=Y.y-$*j,_=X=_.u,j=W-j,X.x=_.x+N*j,X.y=_.y+$*j)}}Dg(_){if(0*_.Ha!=0){var $=_.F.a,j=_.K.a,N=j.x-$.x,W=j.y-$.y,X=this.a,Y=X.x-j.x;if(j=X.y-j.y,X=this.a,0>=(X.x-$.x)*N+(X.y-$.y)*W||0<=Y*N+j*W)return;N=_.X,$=N.x,N=N.y,Y=$*Y+N*j}else{if(N=_.ec,Y=this.a,$=Y.x-N.x,N=Y.y-N.y,Y=_.jd,j=_.kd,(0<Y.x*$+Y.y*N&&0<j.x*$+j.y*N)==0>=_.Ha)return;if(j=Math.sqrt($*$+N*N),j==0)return;Y=j-_.Oe,$/=j,N/=j}if(j=_.ub,j==0)0>Y&&(Y=-Y,$=-$,N=-N);else if(0>j&&(j=-j,Y=-Y,$=-$,N=-N),Y<-j)return;Y>=this.M||(Y=this.M-Y,W=j=this.a,j.x=W.x+$*Y,j.y=W.y+N*Y,Y=this.u,Y=$*Y.x+N*Y.y,0>Y&&(Y*=this.i*_.i+1,j=_=this.u,_.x=j.x-$*Y,_.y=j.y-N*Y))}}class n0{constructor(_,$){this.Le=_,this.Pf=$,this.tb=_,this.Qc=n.performance.now()}Qf(){var _;return _==null&&(_=1),this.Ba(),_<=this.tb?(this.tb-=_,!0):!1}Ba(){let _=n.performance.now(),$=Math.floor((_-this.Qc)/this.Pf);this.Qc+=$*this.Pf,this.tb+=$,this.tb>=this.Le&&(this.tb=this.Le,this.Qc=_)}}class h{static Wf(_,$){if(_=_.charCodeAt($),_==_)return _}static substr(_,$,j){if(j==null)j=_.length;else if(0>j)if($==0)j=_.length+j;else return"";return _.substr($,j)}static remove(_,$){if($=_.indexOf($),$==-1)return!1;return _.splice($,1),!0}static now(){return Date.now()}}class c0{constructor(_,$){this.cg=0,this.version=1,this.ud=0,this.Gb=M.aa(1000),this.xc=M.aa(16384),this.version=$;let j=this.ud=_.da;this.qe=_,_.Fa.G(this.xc);let N=this;_.yb=function(X){let Y=_.da;N.xc.Da(Y-j),j=Y,N.xc.Oa(X.B),V.ue(X,N.xc)},this.Gb.Oa(0);let W=this.ud;_.Fa.Gf(function(X){let Y=_.da;N.Gb.Da(Y-W),N.Gb.f(X),N.cg++,W=Y})}stop(){this.qe.yb=null,this.qe.Fa.Gf(null),this.Gb.j.setUint16(0,this.cg,this.Gb.ra),this.Gb.pb(this.xc.Bb());let _=R0.default.deflateRaw(this.Gb.Bb()),$=M.aa(_.byteLength+32);return $.ie("HBR2"),$.xa(this.version),$.xa(this.qe.da-this.ud),$.pb(_),$.Bb()}}class B0{constructor(){this.ja=H.na,this.N=null,this.Wb=this.uc=0,this.Cb=!1,this.Jb=this.ma=0,this.pa="Player",this.Ai=this.$c=0,this.country=null,this.ne=!1,this.Db=this.Vf=null,this.Eb=0,this.Ub=!1}P(_){_.f(this.Ub?1:0),_.w(this.Eb),_.Ca(this.Db),_.Ca(this.Vf),_.f(this.ne?1:0),_.Ca(this.country),_.w(this.Ai),_.Ca(this.pa),_.w(this.Jb),_.Da(this.ma),_.f(this.Cb?1:0),_.he(this.Wb),_.f(this.uc),_.f(this.ja.S),_.he(this.N==null?-1:this.N.rf)}}class t{constructor(_,$){$==null&&($=!1),this.j=_,this.ra=$,this.a=0}La(_){if(_==null&&(_=this.j.byteLength-this.a),this.a+_>this.j.byteLength)throw T.s("Read too much");let $=new Uint8Array(this.j.buffer,this.j.byteOffset+this.a,_);return this.a+=_,$}Nh(_){let $=this.La(_);return _=new ArrayBuffer(_),new Uint8Array(_).set($),_}Vd(){return this.j.getInt8(this.a++)}C(){return this.j.getUint8(this.a++)}kc(){let _=this.j.getUint16(this.a,this.ra);return this.a+=2,_}H(){let _=this.j.getInt32(this.a,this.ra);return this.a+=4,_}Ob(){let _=this.j.getUint32(this.a,this.ra);return this.a+=4,_}Oh(){let _=this.j.getFloat32(this.a,this.ra);return this.a+=4,_}o(){let _=this.j.getFloat64(this.a,this.ra);return this.a+=8,_}nb(){let _=this.a,$=0,j,N=0;do j=this.j.getUint8(_+$),5>$&&(N|=(j&127)<<7*$>>>0),++$;while((j&128)!=0);return this.a+=$,N|0}ad(_){let $=this.a,j,N="";for(_=$+_;$<_;)j=t.Jg(this.j,$),$+=j.length,N+=String.fromCodePoint(j.char);if($!=_)throw T.s("Actual string length differs from the specified: "+($-_)+" bytes");return this.a=$,N}Ya(){let _=this.nb();return 0>=_?null:this.ad(_-1)}mb(){return this.ad(this.nb())}xf(){let _=this.mb();return JSON.parse(_)}static Jg(_,$){var j=_.getUint8($);let N,W,X,Y,J=$;if((j&128)==0)++$;else if((j&224)==192)N=_.getUint8($+1),j=(j&31)<<6|N&63,$+=2;else if((j&240)==224)N=_.getUint8($+1),W=_.getUint8($+2),j=(j&15)<<12|(N&63)<<6|W&63,$+=3;else if((j&248)==240)N=_.getUint8($+1),W=_.getUint8($+2),X=_.getUint8($+3),j=(j&7)<<18|(N&63)<<12|(W&63)<<6|X&63,$+=4;else if((j&252)==248)N=_.getUint8($+1),W=_.getUint8($+2),X=_.getUint8($+3),Y=_.getUint8($+4),j=(j&3)<<24|(N&63)<<18|(W&63)<<12|(X&63)<<6|Y&63,$+=5;else if((j&254)==252)N=_.getUint8($+1),W=_.getUint8($+2),X=_.getUint8($+3),Y=_.getUint8($+4),_=_.getUint8($+5),j=(j&1)<<30|(N&63)<<24|(W&63)<<18|(X&63)<<12|(Y&63)<<6|_&63,$+=6;else throw T.s("Cannot decode UTF8 character at offset "+$+": charCode ("+j+") is invalid");return{char:j,length:$-J}}}class T1{static zi(_){let $=[];if(_!=null){let N=Object.prototype.hasOwnProperty;for(var j in _)j!="__id__"&&j!="hx__closures__"&&N.call(_,j)&&$.push(j)}return $}}class x{constructor(){this.m=32,this.c=63,this.i=1,this.ka=0,this.X=new F(0,0)}G(_){let $=this.X;_.g($.x),_.g($.y),_.g(this.ka),_.g(this.i),_.w(this.c),_.w(this.m)}qa(_){let $=this.X;$.x=_.o(),$.y=_.o(),this.ka=_.o(),this.i=_.o(),this.c=_.H(),this.m=_.H()}}class V0 extends V{constructor(){super()}apply(_){_.Eg(this.qd)}P(_){_.Da(this.qd.byteLength),_.Sf(this.qd)}W(_){this.qd=_.Nh(_.nb())}}class K0 extends q{constructor(_){q.Ja?super():(q.Ja=!0,super(),q.Ja=!1,this.Aa(_))}Aa(_){this.nd=this.Ra=0,this.Yd=new m0,this.Kg=0,this.Ae=0.06,super.Aa(_)}rg(_){let $=this.Yd.list,j=0,N=$.length,W=0;for(;W<_;){for(++W;j<N;){let X=$[j];if(X.eb!=this.da)break;X.apply(this.Fa),this.yb!=null&&this.yb(X),this.Ra++,++j}this.Fa.Ba(1),this.nd+=this.Ra,this.Ra=0,this.da++}for(;j<N;){if(_=$[j],_.eb!=this.da||_.fb!=this.Ra)break;_.apply(this.Fa),this.yb!=null&&this.yb(_),this.Ra++,++j}$.splice(0,j)}Bf(_){_.eb==this.da&&_.fb<=this.Ra?(_.fb=this.Ra++,_.apply(this.Fa),this.yb!=null&&this.yb(_)):this.Yd.Di(_)}}class r0 extends K0{constructor(_){q.Ja=!0;super();q.Ja=!1,this.Aa(_)}Aa(_){this.Bc=new Map,this.lb=null,this.Wc=32,this.wb=new Map,this.Ga=[],this.Qb=2,this.Bg=600,super.Aa(_.state),this.vh=_.Ei,this.si=_.version,this.wh=1,this.bf=0,this.Kf=n.performance.now(),this.Wa=new G0(this.vh,_.iceServers,j1.channels,_.Gi),this.Wa.Ne=u(this,this.Xg);let $=this;this.Wa.lf=function(j){$.Ah(j)},this.Wa.Yc=function(j){w0.sa($.Yc,j)},this.Wa.ic=function(j,N){$.ic!=null&&$.ic(j,N)}}Mg(_,$,j,N){let W=this.wb.get(_);if(W!=null){if(N){let X=this.Wa.vg(W.jc);this.Bc.set(_,X)}_=M.aa(),_.f(5),_.f(N?1:0),_.Tb($),j==null&&(j=""),_.Tb(j),W.ob(_),W.jc.cb()}}Ed(){this.Wa.Ed(),this.Bc.clear()}Dd(_){let $=this.Bc.get(_);$!=null&&this.Wa.Dd($),this.Bc.delete(_)}be(_){this.Wa.be(_)}ae(_){this.Wa.ae(_)}nc(_){_.B=0;let $=this.da+this.Qb+this.Kg;_.le.delay||($=this.da),_.eb=$,this.Bf(_),this.$d(),0<this.Ga.length&&this.hd(this.Od(_),1)}Df(_,$){if($=this.wb.get($),$!=null){_.B=0;var j=M.aa();j.f(6),V.ue(_,j),$.ob(j,0)}}Ba(){let _=((n.performance.now()-this.Kf)*this.Ae|0)-this.da;0<_&&this.rg(_),7<=this.da-this.cf&&this.$d(),this.da-this.bf>=this.Bg&&(this.$d(),this.Wh())}Xg(_,$){if(this.Ga.length>=this.Wc)return x0.yc(4100);try{if($.kc()!=this.si)throw T.s(null)}catch(j){return x0.yc(4103)}try{let j=$.Ya();if(this.lb!=null&&j!=this.lb)throw T.s(null)}catch(j){return x0.yc(4101)}return x0.ze}Ah(_){if(this.Ga.length>=this.Wc)_.cb();else{var $=new e0(_);this.Ga.push($);var j=this;_.nf=function(N){j.Jh(N,$)},_.mf=function(){h.remove(j.Ga,$),j.wb.delete($.S),w0.sa(j.zh,$.S)},_=M.aa(1+$.dc.byteLength),_.f(0),_.Da($.dc.byteLength),_.pb($.dc),$.ob(_)}}Od(_){let $=M.aa();return $.f(2),this.qf(_,$),$}qf(_,$){$.xa(_.eb),$.Da(_.fb),$.Oa(_.B),$.xa(_.vi),V.ue(_,$)}$d(){if(!(0>=this.da-this.cf)&&this.Ga.length!=0){var _=M.aa();_.f(3),_.xa(this.da),_.xa(this.nd),this.hd(_,2),this.cf=this.da}}hd(_,$){$==null&&($=0);let j=0,N=this.Ga;for(;j<N.length;){let W=N[j];++j,W.cd&&W.ob(_,$)}}$h(_){let $=M.aa();$.f(1);let j=M.aa();j.Oa(_.S),j.xa(this.da),j.xa(this.nd),j.Da(this.Ra),this.Fa.G(j);let N=this.Yd.list,W=0,X=N.length;for(;W<X;)this.qf(N[W++],j);$.pb(R0.default.deflateRaw(j.Bb())),_.ob($)}Wh(){if(this.bf=this.da,this.Ga.length!=0){var _=new V0;_.eb=this.da,_.fb=this.Ra++,_.B=0,_.qd=this.Fa.Qg(),this.hd(this.Od(_))}}Lh(_,$){let j=_.La(_.nb()),N=_.La(_.nb());_=$.dc,$.dc=null;let W=this;U0.ri(j,_).catch(function(){return null}).then(function(X){try{if(W.Ga.indexOf($)!=-1){$.Ig=X;var Y=W.wh++;$.S=Y,W.wb.set(Y,$),u0.sa(W.yh,Y,new t(new DataView(N.buffer,N.byteOffset,N.byteLength),!1)),$.cd=!0,W.$h($)}}catch(J){X=T.Vb(J).Hb(),W.We($,X)}})}Jh(_,$){this.Ba();try{let j=new t(new DataView(_));if(!$.Tg.Qf())throw T.s(1);let N=j.C();if($.cd)switch(N){case 1:this.Mh(j,$);break;case 2:this.Kh(j,$);break;default:throw T.s(0)}else if(N==0)this.Lh(j,$);else throw T.s(0);if(0<j.j.byteLength-j.a)throw T.s(2)}catch(j){this.We($,T.Vb(j).Hb())}}We(_,$){z.console.log($),this.wb.delete(_.S),h.remove(this.Ga,_),_.cd&&this.kf!=null&&this.kf(_.S),_.jc.cb()}Kh(_,$){let j=_.o();$.$c=_.nb(),_=M.aa(),_.f(4),_.g((n.performance.now()-this.Kf)*this.Ae+this.Qb),_.g(j),$.ob(_,2)}Mh(_,$){var j=_.Ob();let N=_.Ob();_=V.Hi(_);var W=_.le.td;if(W!=null){var X=$.He.get(W);if(X==null&&(X=new n0(W.pd,W.wd),$.He.set(W,X)),!X.Qf())throw T.s(3)}W=this.da+this.Qb,X=this.da;var Y=this.da+20;if(X=j<X?X:j>Y?Y:j,Y=j-W,_.le.delay){if(Y<-this.Qb-3)X=W;else{let J=-this.Qb,U=this.Qb;$.hf.qg(Y<J?J:Y>U?U:Y)}X<W&&-0.85>$.hf.ug()&&(X=W),X<$.Jd&&(X=$.Jd),$.Jd=X}_.eg=Y,j=X-j,_.fg=0<j?j:0,_.vi=N,_.B=$.S,_.eb=X,_.dg(this.Fa)&&(this.Bf(_),this.hd(this.Od(_),1))}}class i0 extends V{constructor(){super()}apply(_){let $=_.R(this.B);$!=null&&this.re!=$.ne&&($.ne=this.re,w0.sa(_.Ki,$))}P(_){_.f(this.re?1:0)}W(_){this.re=_.C()!=0}}class _0 extends V{constructor(){super()}apply(_){this.B==0&&k0.sa(_.Mi,this.Pa,this.color,this.style,this.we)}P(_){_.Tb(m.qb(this.Pa,1000)),_.w(this.color),_.f(this.style),_.f(this.we)}W(_){if(this.Pa=_.mb(),1000<this.Pa.length)throw T.s("message too long");this.color=_.H(),this.style=_.C(),this.we=_.C()}static V(_,$,j,N){let W=new _0;return W.Pa=_,W.color=$,W.style=j,W.we=N,W}}class I0 extends V{constructor(){super()}apply(_){if(_.za(this.B)){for(var $=_.R(this.B),j=_.ba,N=[],W=0,X=0,Y=0;Y<j.length;){let J=j[Y];++Y,J.ja==H.na&&N.push(J),J.ja==H.fa?++W:J.ja==H.ta&&++X}j=N.length,j!=0&&(X==W?2>j||(_.Hc($,N[0],H.fa),_.Hc($,N[1],H.ta)):_.Hc($,N[0],X>W?H.fa:H.ta))}}P(){}W(){}}class f extends V{constructor(){super()}apply(_){if(_.za(this.B)&&_.D==null)switch(this.ve){case 0:var $=this.newValue;_.ab=0>$?0:99<$?99:$;break;case 1:$=this.newValue,_.Na=0>$?0:99<$?99:$}}P(_){_.w(this.ve),_.w(this.newValue)}W(_){this.ve=_.H(),this.newValue=_.H()}static V(_,$){let j=new f;return j.ve=_,j.newValue=$,j}}class $0 extends V{constructor(){super()}apply(_){if(_.za(this.B)){var $=_.R(this.B),j=_.R(this.Fb);j!=null&&j.ma!=0&&j.Ub!=this.sd&&(j.Ub=this.sd,_.sf!=null&&_.sf($,j))}}P(_){_.w(this.Fb),_.f(this.sd?1:0)}W(_){this.Fb=_.H(),this.sd=_.C()!=0}static V(_,$){let j=new $0;return j.Fb=_,j.sd=$,j}}class y0 extends V{constructor(){super()}apply(_){_=_.R(this.B),_!=null&&(_.Db=this.Ea)}P(_){_.Ca(this.Ea)}W(_){this.Ea=_.Ya(),this.Ea!=null&&(this.Ea=m.qb(this.Ea,2))}}class j0 extends V{constructor(){super()}apply(_){let $=_.R(this.Fb);if($!=null){var j=_.R(this.B),N=_.za(this.B);(N=N||$==j&&!_.md&&_.D==null)&&_.Hc(j,$,this.se)}}P(_){_.w(this.Fb),_.f(this.se.S)}W(_){this.Fb=_.H(),_=_.Vd(),this.se=_==1?H.fa:_==2?H.ta:H.na}static V(_,$){let j=new j0;return j.Fb=_,j.se=$,j}}class e extends V{constructor(){super()}apply(_){if(_.za(this.B)){var $=_.R(this.B);_.D==null&&(_.ea=this.vd,_.Hf!=null&&_.Hf($,this.vd))}}P(_){var $=M.aa();this.vd.G($),$=R0.default.deflateRaw($.Bb()),_.Oa($.byteLength),_.pb($)}W(_){_=R0.default.inflateRaw(_.La(_.kc())),this.vd=R.qa(new t(new DataView(_.buffer,_.byteOffset,_.byteLength)))}static V(_){let $=new e;return $.vd=_,$}}class Q0 extends V{constructor(){super()}apply(_){_.za(this.B)&&this.ja!=H.na&&(_.sc[this.ja.S]=this.rd)}P(_){_.f(this.ja.S),this.rd.G(_)}W(_){let $=_.Vd();this.ja=$==1?H.fa:$==2?H.ta:H.na,this.rd=new b,this.rd.qa(_)}}class S0 extends V{constructor(){super()}apply(_){if(_.za(this.B)){var $=_.md;_.md=this.newValue,$!=this.newValue&&u0.sa(_.ii,_.R(this.B),this.newValue)}}P(_){_.f(this.newValue?1:0)}W(_){this.newValue=_.C()!=0}}class N0 extends V{constructor(){super()}apply(_){if(this.B==0){var $=new B0;$.ma=this.ma,$.pa=this.name,$.country=this.me,$.Db=this.Db,_.ba.push($),_=_.Eh,_!=null&&_($)}}P(_){_.w(this.ma),_.Ca(this.name),_.Ca(this.me),_.Ca(this.Db)}W(_){this.ma=_.H(),this.name=_.Ya(),this.me=_.Ya(),this.Db=_.Ya()}static V(_,$,j,N){let W=new N0;return W.ma=_,W.name=$,W.me=j,W.Db=N,W}}class W0 extends V{constructor(){super()}apply(_){_=_.R(this.sb),_!=null&&this.B==0&&(_.Vf=this.Ea)}P(_){_.Ca(this.Ea),_.w(this.sb)}W(_){this.Ea=_.Ya(),this.sb=_.H(),this.Ea!=null&&(this.Ea=m.qb(this.Ea,2))}static V(_,$){let j=new W0;return j.Ea=$!=null?m.qb($,2):null,j.sb=_,j}}class O0 extends V{constructor(){super()}apply(_){let $=_.D;if($!=null&&_.za(this.B)){var j=_.R(this.B),N=$.Xa==120,W=0<$.Xa;this.wc?$.Xa=120:$.Xa==120&&($.Xa=119),N!=this.wc&&N1.sa(_.Ch,j,this.wc,W)}}P(_){_.f(this.wc?1:0)}W(_){this.wc=_.C()!=0}}class T0 extends V{constructor(){super()}dg(_){if(_.tf!=null){let $=_.R(this.B);return $==null?!1:_.tf($,this.Pa)}return!0}apply(_){let $=_.R(this.B);$!=null&&u0.sa(_.Ji,$,this.Pa)}P(_){_.Tb(m.qb(this.Pa,140))}W(_){if(this.Pa=_.mb(),140<this.Pa.length)throw T.s("message too long")}}class E0 extends V{constructor(){super()}apply(_){let $=_.R(this.B);if($!=null){var j=this.input;($.Jb&16)==0&&(j&16)!=0&&($.Cb=!0),$.Jb=j,_.uf!=null&&$.N!=null&&_.uf($,this.input,this.eg,this.fg)}}P(_){_.xa(this.input)}W(_){this.input=_.Ob()}}class F0 extends V{constructor(){super()}apply(_){let $=_.R(this.B);$!=null&&u0.sa(_.Li,$,this.gg)}P(_){_.f(this.gg)}W(_){this.gg=_.C()}}class k extends V{constructor(){V.Ja=!0;super();V.Ja=!1,this.Aa()}Aa(){this.od=!1,super.Aa()}apply(_){if(this.ma!=0&&_.za(this.B)){var $=_.R(this.ma);if($!=null){var j=_.R(this.B);h.remove(_.ba,$),_.D!=null&&h.remove(_.D.ia.A,$.N),k0.sa(_.Fh,$,this.rb,this.od,j)}}}P(_){this.rb!=null&&(this.rb=m.qb(this.rb,100)),_.w(this.ma),_.Ca(this.rb),_.f(this.od?1:0)}W(_){if(this.ma=_.H(),this.rb=_.Ya(),this.od=_.C()!=0,this.rb!=null&&100<this.rb.length)throw T.s("string too long")}static V(_,$,j){let N=new k;return N.ma=_,N.rb=$,N.od=j,N}}class X0 extends V{constructor(){super()}apply(_){if(this.B==0){for(var $=new Map,j=0,N=_.ba;j<N.length;){var W=N[j];++j,$.set(W.ma,W)}j=[],N=0;for(W=this.vc;N<W.length;){var X=W[N];++N;let Y=$.get(X);Y!=null&&($.delete(X),j.push(Y))}N=[],$=$.values();for(W=$.next();!W.done;)X=W.value,W=$.next(),N.push(X);_.ba=this.te?j.concat(N):N.concat(j)}}P(_){_.f(this.te?1:0),_.f(this.vc.length);let $=0,j=this.vc;for(;$<j.length;)_.w(j[$++])}W(_){this.te=_.C()!=0;let $=_.C();this.vc=[];let j=0;for(;j<$;)++j,this.vc.push(_.H())}static V(_,$){let j=new X0;for(var N=new Set,W=0;W<_.length;)N.add(_[W++]);_=[],W=0,N=N.values();let X=N.next();for(;!X.done;){let Y=X.value;if(X=N.next(),_.push(Y),++W,40<=W)break}return j.vc=_,j.te=$,j}}class w extends V{constructor(){super()}apply(_){if(this.B==0){var $=_.D;if($!=null){if(this.pe){if(_=_.R(this.sb),_==null)return;_=_.N}else _=$.ia.A[this.sb];_!=null&&(this.O[0]!=null&&(_.a.x=this.O[0]),this.O[1]!=null&&(_.a.y=this.O[1]),this.O[2]!=null&&(_.u.x=this.O[2]),this.O[3]!=null&&(_.u.y=this.O[3]),this.O[4]!=null&&(_.la.x=this.O[4]),this.O[5]!=null&&(_.la.y=this.O[5]),this.O[6]!=null&&(_.M=this.O[6]),this.O[7]!=null&&(_.i=this.O[7]),this.O[8]!=null&&(_.L=this.O[8]),this.O[9]!=null&&(_.ga=this.O[9]),this.ya[0]!=null&&(_.T=this.ya[0]),this.ya[1]!=null&&(_.c=this.ya[1]),this.ya[2]!=null&&(_.m=this.ya[2]))}}}P(_){_.w(this.sb),_.f(this.pe?1:0);let $=_.a;_.Oa(0);let j=0;for(var N=1,W=0,X=this.O;W<X.length;){var Y=X[W];++W,Y!=null&&(j|=N,_.ge(Y)),N<<=1}W=0;for(X=this.ya;W<X.length;)Y=X[W],++W,Y!=null&&(j|=N,_.w(Y)),N<<=1;N=_.a,_.a=$,_.Oa(j),_.a=N}W(_){this.sb=_.H(),this.pe=_.C()!=0;let $=_.kc();this.O=[];for(var j=0;10>j;){var N=j++;this.O[N]=null,($&1)!=0&&(this.O[N]=_.Oh()),$>>>=1}this.ya=[];for(j=0;3>j;)N=j++,this.ya[N]=null,($&1)!=0&&(this.ya[N]=_.H()),$>>>=1}static ag(_,$,j){let N=new w;N.sb=_,N.pe=$,N.O=[j.x,j.y,j.xspeed,j.yspeed,j.xgravity,j.ygravity,j.radius,j.bCoeff,j.invMass,j.damping],N.ya=[j.color,j.cMask,j.cGroup],_=0;for($=N.O.length;_<$;){j=_++;var W=N.O[j];W!=null&&(w.Xf[0]=W,N.O[j]=w.Xf[0])}_=0;for($=N.ya.length;_<$;)j=_++,W=N.ya[j],W!=null&&(w.$f[0]=W,N.ya[j]=w.$f[0]);return N}}class Y0 extends V{constructor(){super()}apply(_){_.za(this.B)&&_.ai(_.R(this.B),this.min,this.rate,this.ke)}P(_){_.w(this.min),_.w(this.rate),_.w(this.ke)}W(_){this.min=_.H(),this.rate=_.H(),this.ke=_.H()}static V(_,$,j){let N=new Y0;return N.min=_,N.rate=$,N.ke=j,N}}class P0 extends V{constructor(){super()}apply(_){_.za(this.B)&&_.ei(_.R(this.B))}P(){}W(){}}class H0 extends V{constructor(){super()}apply(_){if(_.za(this.B)){var $=_.R(this.B);if(_.D!=null){_.D=null;let j=0,N=_.ba;for(;j<N.length;){let W=N[j];++j,W.N=null,W.Eb=0}_.ld!=null&&_.ld($)}}}P(){}W(){}}class Z0 extends V{constructor(){super()}apply(_){if(this.B==0){_=_.ba;for(var $=0,j=_.length;$<j;){let N=$++;if(N>=this.Xb.length)break;_[N].$c=this.Xb[N]}}}P(_){_.Da(this.Xb.length);let $=0,j=this.Xb;for(;$<j.length;)_.Da(j[$++])}W(_){this.Xb=[];let $=_.nb(),j=0;for(;j<$;)++j,this.Xb.push(_.nb())}static V(_){let $=new Z0,j=_.Fa.ba,N=[],W=0;for(;W<j.length;){let X=_.wb.get(j[W++].ma);N.push(X==null?0:X.$c)}return $.Xb=N,$}}class T extends Error{constructor(_,$,j){super(_);this.message=_,this.Fe=j!=null?j:this}Hb(){return this.Fe}toString(){return this.message}static Vb(_){return _ instanceof T?_:_ instanceof Error?new T(_.message,null,_):new v0(_,null,_)}static s(_){return _ instanceof T?_.Fe:_ instanceof Error?_:new v0(_)}}class v0 extends T{constructor(_,$,j){super(String(_),$,j);this.value=_}Hb(){return this.value}}var X1=X1||{},Y1;h.b=!0,Math.b=!0,T1.b=!0,p0.b=!0,Q1.b=!0,m.b=!0,W1.b=!0,W1.yd=!0,J0.b=!0,J0.gb=[W1],Object.assign(J0.prototype,{h:J0});var x0=X1["bas.basnet.ConnectionRequestResponse"]={Ce:!0,Be:null,ze:{Xe:"Accept",Kd:0,Yb:"bas.basnet.ConnectionRequestResponse",toString:C},yc:(Y1=function(_){return{Kd:1,reason:_,Yb:"bas.basnet.ConnectionRequestResponse",toString:C}},Y1.Xe="Reject",Y1.Ge=["reason"],Y1)};x0.Be=[x0.ze,x0.yc],G0.b=!0,Object.assign(G0.prototype,{h:G0}),S1.b=!0,g0.b=!0,Object.assign(g0.prototype,{h:g0}),t.b=!0,Object.assign(t.prototype,{h:t}),M.b=!0,Object.assign(M.prototype,{h:M}),U0.b=!0,D0.b=!0,V1.b=!0,V.b=!0,Object.assign(V.prototype,{h:V}),m0.b=!0,Object.assign(m0.prototype,{h:m0}),q.b=!0,Object.assign(q.prototype,{h:q}),V0.b=!0,V0.J=V,Object.assign(V0.prototype,{h:V0}),C0.b=!0,C0.yd=!0,Object.assign(C0.prototype,{h:C0}),c0.b=!0,Object.assign(c0.prototype,{h:c0}),a.b=!0,a.yd=!0,K0.b=!0,K0.J=q,Object.assign(K0.prototype,{h:K0}),r0.b=!0,r0.J=K0,Object.assign(r0.prototype,{h:r0}),e0.b=!0,Object.assign(e0.prototype,{h:e0}),d0.b=!0,Object.assign(d0.prototype,{h:d0}),j1.b=!0,_1.b=!0,Object.assign(_1.prototype,{h:_1}),F.b=!0,Object.assign(F.prototype,{h:F}),g.b=!0,w0.b=!0,u0.b=!0,N1.b=!0,k0.b=!0,n0.b=!0,Object.assign(n0.prototype,{h:n0}),c.b=!0,Object.assign(c.prototype,{h:c}),z0.b=!0,y.b=!0,f0.b=!0,Object.assign(f0.prototype,{h:f0}),d.b=!0,Object.assign(d.prototype,{h:d}),r.b=!0,r.gb=[a],Object.assign(r.prototype,{h:r}),o.b=!0,Object.assign(o.prototype,{h:o}),o0.b=!0,Object.assign(o0.prototype,{h:o0}),L0.b=!0,Object.assign(L0.prototype,{h:L0}),R.b=!0,Object.assign(R.prototype,{h:R}),b.b=!0,Object.assign(b.prototype,{h:b}),H.b=!0,Object.assign(H.prototype,{h:H}),q0.b=!0,q0.gb=[a,C0],Object.assign(q0.prototype,{h:q0}),B0.b=!0,B0.gb=[a],Object.assign(B0.prototype,{h:B0}),i0.b=!0,i0.J=V,Object.assign(i0.prototype,{h:i0}),_0.b=!0,_0.J=V,Object.assign(_0.prototype,{h:_0}),I0.b=!0,I0.J=V,Object.assign(I0.prototype,{h:I0}),f.b=!0,f.J=V,Object.assign(f.prototype,{h:f}),$0.b=!0,$0.J=V,Object.assign($0.prototype,{h:$0}),y0.b=!0,y0.J=V,Object.assign(y0.prototype,{h:y0}),j0.b=!0,j0.J=V,Object.assign(j0.prototype,{h:j0}),e.b=!0,e.J=V,Object.assign(e.prototype,{h:e}),Q0.b=!0,Q0.J=V,Object.assign(Q0.prototype,{h:Q0}),S0.b=!0,S0.J=V,Object.assign(S0.prototype,{h:S0}),N0.b=!0,N0.J=V,Object.assign(N0.prototype,{h:N0}),W0.b=!0,W0.J=V,Object.assign(W0.prototype,{h:W0}),O0.b=!0,O0.J=V,Object.assign(O0.prototype,{h:O0}),T0.b=!0,T0.J=V,Object.assign(T0.prototype,{h:T0}),E0.b=!0,E0.J=V,Object.assign(E0.prototype,{h:E0}),F0.b=!0,F0.J=V,Object.assign(F0.prototype,{h:F0}),O1.b=!0,k.b=!0,k.J=V,Object.assign(k.prototype,{h:k}),X0.b=!0,X0.J=V,Object.assign(X0.prototype,{h:X0}),w.b=!0,w.J=V,Object.assign(w.prototype,{h:w}),Y0.b=!0,Y0.J=V,Object.assign(Y0.prototype,{h:Y0}),P0.b=!0,P0.J=V,Object.assign(P0.prototype,{h:P0}),H0.b=!0,H0.J=V,Object.assign(H0.prototype,{h:H0}),Z0.b=!0,Z0.J=V,Object.assign(Z0.prototype,{h:Z0}),M0.b=!0,M0.gb=[a],Object.assign(M0.prototype,{h:M0}),l.b=!0,l.gb=[a],Object.assign(l.prototype,{h:l}),t0.b=!0,t0.gb=[a],Object.assign(t0.prototype,{h:t0}),x.b=!0,Object.assign(x.prototype,{h:x}),I.b=!0,Object.assign(I.prototype,{h:I}),B.b=!0,Object.assign(B.prototype,{h:B}),T.b=!0,T.J=Error,Object.assign(T.prototype,{h:T}),v0.b=!0,v0.J=T,Object.assign(v0.prototype,{h:v0}),$1.b=!0,Object.assign($1.prototype,{h:$1}),O.b=!0,z.ye|=0,typeof n.performance<"u"&&typeof n.performance.now=="function"&&(h.now=n.performance.now.bind(n.performance)),String.fromCodePoint==null&&(String.fromCodePoint=function(_){return 65536>_?String.fromCharCode(_):String.fromCharCode((_>>10)+55232)+String.fromCharCode((_&1023)+56320)}),Object.defineProperty(String.prototype,"__class__",{value:String,enumerable:!1,writable:!0}),String.b=!0,Array.b=!0;var h0={},o1={},L=Number,Z1=Boolean,C1={},t1={};H.na=new H(0,16777215,0,-1,"Spectators","t-spec",0,0),H.fa=new H(1,15035990,-1,8,"Red","t-red",15035990,2),H.ta=new H(2,5671397,1,16,"Blue","t-blue",625603,4),H.na.Zc=H.na,H.fa.Zc=H.ta,H.ta.Zc=H.fa,O.pg={}.toString,J0.Fg={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},U0.sg={name:"ECDSA",namedCurve:"P-256"},U0.ci={name:"ECDSA",hash:{name:"SHA-256"}},V.Ja=!1,V.Zf=new Map,V.je=0,q.Ja=!1,V0.U=V.Z({ca:!1,delay:!1}),j1.channels=[{name:"ro",reliable:!0,ordered:!0},{name:"ru",reliable:!0,ordered:!1},{name:"uu",reliable:!1,ordered:!1}],g.hg="application/x-www-form-urlencoded",z0.Ke="https://www.haxball.com/rs/",z0.Md=[{urls:"stun:stun.l.google.com:19302"}],y.Se=new c,y.Ff=!1,r.jf=function(){let _=[];{let $=0;for(;256>$;)++$,_.push(new F(0,0))}return _}(this),r.Re=function(){let _=[];{let $=0;for(;256>$;)++$,_.push(0)}return _}(this),i0.U=V.Z({ca:!1,delay:!1,td:{pd:2,wd:1e4}}),_0.U=V.Z({ca:!1,delay:!1,td:{pd:10,wd:900}}),I0.U=V.Z({ca:!1,delay:!1}),f.U=V.Z({ca:!1,delay:!1}),$0.U=V.Z({ca:!1,delay:!1}),y0.U=V.Z({ca:!1,delay:!1}),j0.U=V.Z({ca:!1,delay:!1}),e.U=V.Z({ca:!1,delay:!1,td:{pd:10,wd:2000}}),Q0.U=V.Z({ca:!1,delay:!1}),S0.U=V.Z({ca:!1,delay:!1}),N0.U=V.Z({ca:!1,delay:!1}),W0.U=V.Z({ca:!1,delay:!1}),O0.U=V.Z({}),T0.U=V.Z({ca:!1,delay:!1,td:{pd:10,wd:900}}),E0.U=V.Z({}),F0.U=V.Z({ca:!1,delay:!1}),k.U=V.Z({ca:!1,delay:!1}),X0.U=V.Z({ca:!1,delay:!1}),w.U=V.Z({ca:!1,delay:!1}),w.Xf=new Float32Array(1),w.$f=new Int32Array(1),Y0.U=V.Z({ca:!1,delay:!1}),P0.U=V.Z({ca:!1,delay:!1}),H0.U=V.Z({ca:!1,delay:!1}),Z0.U=V.Z({ca:!1,delay:!1}),I.jg=0.17435839227423353,I.ig=5.934119456780721,y.sh()})(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:null);
